{"version":3,"sources":["webpack:///node_modules/angular-imask/__ivy_ngcc__/fesm2015/angular-imask.js","webpack:///node_modules/imask/esm/_rollupPluginBabelHelpers-a0b34764.js","webpack:///node_modules/imask/esm/controls/html-contenteditable-mask-element.js","webpack:///node_modules/imask/esm/controls/html-mask-element.js","webpack:///node_modules/imask/esm/controls/input.js","webpack:///node_modules/imask/esm/controls/mask-element.js","webpack:///node_modules/imask/esm/core/action-details.js","webpack:///node_modules/imask/esm/core/change-details.js","webpack:///node_modules/imask/esm/core/continuous-tail-details.js","webpack:///node_modules/imask/esm/core/holder.js","webpack:///node_modules/imask/esm/core/utils.js","webpack:///node_modules/imask/esm/index.js","webpack:///node_modules/imask/esm/masked/base.js","webpack:///node_modules/imask/esm/masked/date.js","webpack:///node_modules/imask/esm/masked/dynamic.js","webpack:///node_modules/imask/esm/masked/enum.js","webpack:///node_modules/imask/esm/masked/factory.js","webpack:///node_modules/imask/esm/masked/function.js","webpack:///node_modules/imask/esm/masked/number.js","webpack:///node_modules/imask/esm/masked/pattern.js","webpack:///node_modules/imask/esm/masked/pattern/chunk-tail-details.js","webpack:///node_modules/imask/esm/masked/pattern/fixed-definition.js","webpack:///node_modules/imask/esm/masked/pattern/input-definition.js","webpack:///node_modules/imask/esm/masked/pipe.js","webpack:///node_modules/imask/esm/masked/range.js","webpack:///node_modules/imask/esm/masked/regexp.js"],"names":["IMaskFactory","ɵfac","IMaskFactory_Factory","t","ɵprov","factory","token","providedIn","type","args","MASKEDINPUT_VALUE_ACCESSOR","provide","useExisting","IMaskDirective","multi","DEFAULT_IMASK_ELEMENT","elementRef","nativeElement","ɵ0","_elementRef","_renderer","_factory","_compositionMode","onTouched","onChange","imaskElement","accept","complete","_viewInitialized","_composing","_writing","_isAndroid","maskRef","element","value","unmask","typedValue","unmaskedValue","setProperty","imask","initMask","changes","updateOptions","maskValue","destroyMask","destroy","_writingValue","beginWrite","el","isActive","endWrite","emit","create","on","_onAccept","bind","_onComplete","isDisabled","fn","_handleInput","test","navigator","userAgent","toLowerCase","IMaskDirective_Factory","ɵdir","selectors","hostBindings","IMaskDirective_HostBindings","rf","ctx","IMaskDirective_input_HostBindingHandler","$event","target","IMaskDirective_blur_HostBindingHandler","IMaskDirective_compositionstart_HostBindingHandler","_compositionStart","IMaskDirective_compositionend_HostBindingHandler","_compositionEnd","inputs","outputs","exportAs","features","ctorParameters","Boolean","decorators","propDecorators","selector","host","providers","IMaskPipe","IMaskPipe_Factory","ɵpipe","name","pure","DefaultImaskFactory","opts","DefaultImaskFactory_Factory","IMaskDirectiveModule","ɵmod","ɵinj","IMaskDirectiveModule_Factory","useClass","imports","ngJitMode","declarations","exports","IMaskModule","IMaskModule_Factory","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_defineProperty","_inherits","subClass","superClass","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","valueOf","call","e","_objectWithoutPropertiesLoose","source","excluded","sourceKeys","keys","indexOf","_objectWithoutProperties","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","arguments","apply","_superPropBase","object","property","hasOwnProperty","_get","receiver","get","base","desc","getOwnPropertyDescriptor","set","_set","isStrict","s","Error","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","Array","isArray","_i","_arr","_n","_d","_s","_e","next","done","push","err","minLen","_arrayLikeToArray","n","toString","slice","from","len","arr2","HTMLContenteditableMaskElement","_HTMLMaskElement","_super","root","rootElement","selection","getSelection","anchorOffset","_unsafeSelectionStart","String","_unsafeSelect","start","end","createRange","range","setStart","input","firstChild","setEnd","lastChild","removeAllRanges","addRange","textContent","HTMLMaskElement","_MaskElement","_this","_handlers","getRootNode","document","activeElement","selectionStart","selectionEnd","setSelectionRange","bindEvents","handlers","_this2","forEach","event","_toggleEventHandler","EVENTS_MAP","unbindEvents","_this3","handler","removeEventListener","addEventListener","selectionChange","drop","click","focus","commit","_excluded","InputMask","isContentEditable","tagName","masked","_listeners","_value","_unmaskedValue","_saveSelection","_onInput","_onChange","_onDrop","_onFocus","_onClick","alignCursor","alignCursorFriendly","_bindEvents","updateValue","mask","maskEquals","Masked","Date","str","updateControl","val","_unbindEvents","_fireEvent","ev","_len","_key","listeners","l","_cursorChanging","_changingCursorPos","pos","select","console","warn","_selection","cursorPos","newUnmaskedValue","newValue","isChanged","_fireChangeEvents","restOpts","updateMask","updateOpts","updateCursor","_delayUpdateCursor","_abortUpdateCursor","setTimeout","_inputEvent","isComplete","clearTimeout","nearestInputPos","LEFT","off","hIndex","splice","details","oldRawValue","rawInputValue","offset","startChangePos","removed","inserted","removeDirection","NONE","doCommit","preventDefault","stopPropagation","MaskElement","_unsafeSelectionEnd","ActionDetails","oldValue","oldSelection","Math","min","substr","insertedCount","max","removedCount","substring","RIGHT","ChangeDetails","assign","rawInserted","skip","tailShift","aggregate","ContinuousTailDetails","undefined","stop","extend","tail","appendTo","append","_appendPlaceholder","state","shiftBefore","shiftChar","IMask","isString","DIRECTION","FORCE_LEFT","FORCE_RIGHT","indexInDirection","direction","posInDirection","forceDirection","escapeRegExp","replace","objectIncludes","b","a","arrA","arrB","dateA","dateB","getTime","regexpA","RegExp","regexpB","globalThis","_update","DEFAULTS","isInitialized","withValueRefresh","reset","resolve","doParse","doFormat","extractInput","raw","fromPos","toPos","extractTail","appendTail","_appendCharRaw","ch","_appendChar","flags","checkTail","consistentState","doPrepare","consistentTail","appended","doValidate","beforeTailState","overwrite","tailDetails","_beforeTailState","ci","remove","_refreshing","rawInput","ret","runIsolated","_isolated","prepare","validate","parent","format","parse","deleteCount","tailPos","changeDetails","v","MaskedDate","_MaskedPattern","pattern","blocks","GET_DEFAULT_BLOCKS","Y","getFullYear","to","m","getMonth","d","getDate","bk","autofix","_get2","date","concat","isDateExist","day","padStart","month","year","join","_str$split","split","_str$split2","maxLength","MaskedDynamic","_Masked","currentMask","compiledMasks","map","_applyDispatch","prevValueBeforeTail","inputValue","insertValue","_rawInputValue","tailValue","prevMask","prevMaskState","doDispatch","dispatch","_this$currentMask","_this$currentMask2","currentMaskRef","maskedState","mi","_this$currentMask3","_this$currentMask4","_get3","_len2","_key2","_this$currentMask5","_get4","_len3","_key3","index","weight","sort","i1","i2","MaskedEnum","repeat","some","maskedClass","MaskedRegExp","MaskedPattern","Number","MaskedNumber","Function","MaskedFunction","createMask","MaskedClass","_updateRegExps","allowNegative","midInput","mid","scale","radix","_numberRegExpInput","_numberRegExp","_mapToRadixRegExp","mapToRadix","_thousandsSeparatorRegExp","thousandsSeparator","_removeThousandsSeparators","_insertThousandsSeparators","parts","_separatorsCount","extendOnSeparators","count","_separatorsCountFromSlice","_this$_adjustRangeWit","_adjustRangeWithSeparators","_this$_adjustRangeWit2","prevBeforeTailValue","prevBeforeTailSeparatorsCount","appendDetails","beforeTailValue","beforeTailSeparatorsCount","_findSeparatorAround","searchFrom","separatorPos","separatorAroundFromPos","separatorAroundToPos","_this$_adjustRangeWit3","_this$_adjustRangeWit4","valueBeforePos","valueAfterPos","separatorAtLeftPos","separatorAtLeftEndPos","separatorAtRightPos","regexp","valid","number","isNaN","validnum","formatted","normalizeZeros","_normalizeZeros","padFractionalZeros","_padFractionalZeros","match","sign","zeros","num","padEnd","signed","definitions","_rebuildMask","defs","_blocks","_stops","_maskedBlocks","unmaskingBlock","optionalBlock","_ret","bNames","filter","bName","maskedBlock","lazy","placeholderChar","char","_isInput","STOP_CHAR","ESCAPE_CHAR","def","isOptional","isUnmasking","bi","every","reduce","blockIter","_mapPosToBlock","_block","blockDetails","chunkTail","_forEachBlocksInRange","bFromPos","bToPos","blockChunk","_findStopBefore","_blockStartPos","blockIndex","_","stopBefore","si","toBlockIndex","startBlockIter","startBlockIndex","endBlockIndex","bDetails","accVal","_block2","blockStartPos","fromBlockIter","toBlockIter","isSameBlock","fromBlockStartPos","fromBlockEndPos","removeDetails","beginBlockData","beginBlockOffset","beginBlockIndex","beginBlock","beginBlockCursorPos","cursorAtRight","cursorAtLeft","searchBlockIndex","blockIndexAtLeft","blockAtLeft","blockInputPos","firstInputAtRight","blockAtRight","_blockInputPos","_bi","_block3","_blockInputPos2","firstFilledBlockIndexAtRight","_bi2","filledBlock","_blockInputPos3","firstFilledInputBlockIndex","firstEmptyInputBlockIndex","_bi3","_block4","_blockInputPos4","_bi4","_block5","_blockInputPos5","blockAlignedPos","isInput","_bi5","_block6","_blockInputPos6","firstInputBlockAlignedIndex","firstInputBlockAlignedPos","_bi6","_block7","_blockInputPos7","_bi7","_block8","_blockInputPos8","_bi8","_block9","_blockInputPos9","alignedPos","maskedBlocks","_this4","indices","gi","InputDefinition","FixedDefinition","block","ChunksTailDetails","chunks","tailChunk","lastChunk","extendLast","firstTailChunk","shift","chunk","lastBlockIter","chunkBlock","remainChars","c","cstate","chunkShiftPos","PatternFixedDefinition","_isRawInput","minPos","maxPos","isResolved","DEFAULT_INPUT_DEFINITIONS","PatternInputDefinition","blockOpts","_isFilled","_this$masked","_this$masked2","_this$masked3","boundPos","_this$masked4","_this$parent","PIPE_TYPE","MASKED","UNMASKED","TYPED","createPipe","pipe","pipeArgs","MaskedRange","fromStr","toStr","sameCharsCount","boundaries","minstr","maxstr","_ref","_ref2","placeholder","prepStr","nextVal","_this$boundaries","_this$boundaries2","firstNonZero","search","_matchFrom","_this$boundaries3","_this$boundaries4"],"mappings":"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","file":"default~main-component-ubs-ubs-module~ubs-admin-ubs-admin-module~ubs-user-ubs-user-module-es5.js","sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, forwardRef, EventEmitter, Directive, ElementRef, Renderer2, Optional, Inject, Input, Output, Pipe, NgModule } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, COMPOSITION_BUFFER_MODE } from '@angular/forms';\nimport IMask, { pipe } from 'imask';\nimport * as ɵngcc0 from '@angular/core';\nexport { PIPE_TYPE, pipe } from 'imask';\nimport { CommonModule } from '@angular/common';\n\nclass IMaskFactory {\n}\nIMaskFactory.ɵfac = function IMaskFactory_Factory(t) { return new (t || IMaskFactory)(); };\nIMaskFactory.ɵprov = i0.ɵɵdefineInjectable({ factory: function IMaskFactory_Factory() { return new IMaskFactory(); }, token: IMaskFactory, providedIn: \"root\" });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IMaskFactory, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], null, null); })();\n\nconst MASKEDINPUT_VALUE_ACCESSOR = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => IMaskDirective),\n    multi: true\n};\nconst DEFAULT_IMASK_ELEMENT = (elementRef) => elementRef.nativeElement;\nconst ɵ0 = DEFAULT_IMASK_ELEMENT;\nclass IMaskDirective {\n    constructor(_elementRef, _renderer, _factory, _compositionMode) {\n        this._elementRef = _elementRef;\n        this._renderer = _renderer;\n        this._factory = _factory;\n        this._compositionMode = _compositionMode;\n        // init here to support AOT (TODO may be will work with ng-packgr - need to check)\n        this.onTouched = () => { };\n        this.onChange = () => { };\n        this.imaskElement = DEFAULT_IMASK_ELEMENT;\n        this.accept = new EventEmitter();\n        this.complete = new EventEmitter();\n        this._viewInitialized = false;\n        this._composing = false;\n        this._writing = false;\n        if (this._compositionMode == null) {\n            this._compositionMode = !this._isAndroid();\n        }\n    }\n    get element() {\n        return this.imaskElement(this._elementRef, this);\n    }\n    get maskValue() {\n        if (!this.maskRef)\n            return this.element.value;\n        if (this.unmask === 'typed')\n            return this.maskRef.typedValue;\n        if (this.unmask)\n            return this.maskRef.unmaskedValue;\n        return this.maskRef.value;\n    }\n    set maskValue(value) {\n        if (this.maskRef) {\n            if (this.unmask === 'typed')\n                this.maskRef.typedValue = value;\n            else if (this.unmask)\n                this.maskRef.unmaskedValue = value;\n            else\n                this.maskRef.value = value;\n        }\n        else {\n            this._renderer.setProperty(this.element, 'value', value);\n        }\n    }\n    ngAfterViewInit() {\n        if (this.imask)\n            this.initMask();\n        this._viewInitialized = true;\n    }\n    ngOnChanges(changes) {\n        if (changes.elementRef && !this.imaskElement)\n            this.imaskElement = DEFAULT_IMASK_ELEMENT;\n        if (!changes.imask || !this._viewInitialized)\n            return;\n        if (this.imask) {\n            if (this.maskRef)\n                this.maskRef.updateOptions(this.imask);\n            else {\n                this.initMask();\n                this.onChange(this.maskValue);\n            }\n        }\n        else {\n            this.destroyMask();\n        }\n    }\n    destroyMask() {\n        if (this.maskRef) {\n            this.maskRef.destroy();\n            delete this.maskRef;\n        }\n    }\n    ngOnDestroy() {\n        this.destroyMask();\n        this.accept.complete();\n        this.complete.complete();\n    }\n    beginWrite(value) {\n        this._writing = true;\n        this._writingValue = value;\n    }\n    endWrite() {\n        this._writing = false;\n        return this._writingValue;\n    }\n    writeValue(value) {\n        value = value == null ? '' : value;\n        if (this.maskRef) {\n            this.beginWrite(value);\n            if (this.maskValue !== value ||\n                // handle cases like Number('') === 0,\n                // for details see https://github.com/uNmAnNeR/imaskjs/issues/134\n                (typeof value !== 'string' && this.maskRef.value === '') &&\n                    !this.maskRef.el.isActive) {\n                this.maskValue = value;\n            }\n        }\n        else {\n            this._renderer.setProperty(this.element, 'value', value);\n        }\n    }\n    _onAccept() {\n        const value = this.maskValue;\n        // if value was not changed during writing don't fire events\n        // for details see https://github.com/uNmAnNeR/imaskjs/issues/136\n        if (this._writing && value === this.endWrite())\n            return;\n        this.onChange(value);\n        this.accept.emit(value);\n    }\n    _onComplete() {\n        this.complete.emit(this.maskValue);\n    }\n    initMask() {\n        this.maskRef = this._factory.create(this.element, this.imask)\n            .on('accept', this._onAccept.bind(this))\n            .on('complete', this._onComplete.bind(this));\n    }\n    setDisabledState(isDisabled) {\n        this._renderer.setProperty(this.element, 'disabled', isDisabled);\n    }\n    registerOnChange(fn) { this.onChange = fn; }\n    registerOnTouched(fn) { this.onTouched = fn; }\n    _handleInput(value) {\n        // if mask is attached all input goes throw mask\n        if (this.maskRef)\n            return;\n        if (!this._compositionMode || (this._compositionMode && !this._composing)) {\n            this.onChange(value);\n        }\n    }\n    _compositionStart() { this._composing = true; }\n    _compositionEnd(value) {\n        this._composing = false;\n        this._compositionMode && this._handleInput(value);\n    }\n    _isAndroid() {\n        return /android (\\d+)/.test(navigator.userAgent.toLowerCase());\n    }\n}\nIMaskDirective.ɵfac = function IMaskDirective_Factory(t) { return new (t || IMaskDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(IMaskFactory), ɵngcc0.ɵɵdirectiveInject(COMPOSITION_BUFFER_MODE, 8)); };\nIMaskDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: IMaskDirective, selectors: [[\"\", \"imask\", \"\"]], hostBindings: function IMaskDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"input\", function IMaskDirective_input_HostBindingHandler($event) { return ctx._handleInput($event.target.value); })(\"blur\", function IMaskDirective_blur_HostBindingHandler() { return ctx.onTouched(); })(\"compositionstart\", function IMaskDirective_compositionstart_HostBindingHandler() { return ctx._compositionStart(); })(\"compositionend\", function IMaskDirective_compositionend_HostBindingHandler($event) { return ctx._compositionEnd($event.target.value); });\n    } }, inputs: { imaskElement: \"imaskElement\", imask: \"imask\", unmask: \"unmask\" }, outputs: { accept: \"accept\", complete: \"complete\" }, exportAs: [\"imask\"], features: [ɵngcc0.ɵɵProvidersFeature([MASKEDINPUT_VALUE_ACCESSOR]), ɵngcc0.ɵɵNgOnChangesFeature] });\nIMaskDirective.ctorParameters = () => [\n    { type: ElementRef },\n    { type: Renderer2 },\n    { type: IMaskFactory },\n    { type: Boolean, decorators: [{ type: Optional }, { type: Inject, args: [COMPOSITION_BUFFER_MODE,] }] }\n];\nIMaskDirective.propDecorators = {\n    imask: [{ type: Input }],\n    unmask: [{ type: Input }],\n    imaskElement: [{ type: Input }],\n    accept: [{ type: Output }],\n    complete: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IMaskDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[imask]',\n                exportAs: 'imask',\n                host: {\n                    '(input)': '_handleInput($event.target.value)',\n                    '(blur)': 'onTouched()',\n                    '(compositionstart)': '_compositionStart()',\n                    '(compositionend)': '_compositionEnd($event.target.value)'\n                },\n                providers: [MASKEDINPUT_VALUE_ACCESSOR]\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }, { type: IMaskFactory }, { type: Boolean, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [COMPOSITION_BUFFER_MODE]\n            }] }]; }, { imaskElement: [{\n            type: Input\n        }], accept: [{\n            type: Output\n        }], complete: [{\n            type: Output\n        }], imask: [{\n            type: Input\n        }], unmask: [{\n            type: Input\n        }] }); })();\n\n/*\n * Transforms value through mask\n * Takes mask and optionally `from` and `to` pipe types.\n * Usage:\n *   value | imask:MASK_OR_MASKED:opt_from:opt_to\n * Example:\n *   {{ 2 | imask:mask }}\n*/\nclass IMaskPipe {\n    transform(...args) {\n        return pipe(...args);\n    }\n}\nIMaskPipe.ɵfac = function IMaskPipe_Factory(t) { return new (t || IMaskPipe)(); };\nIMaskPipe.ɵpipe = ɵngcc0.ɵɵdefinePipe({ name: \"imask\", type: IMaskPipe, pure: true });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IMaskPipe, [{\n        type: Pipe,\n        args: [{ name: 'imask' }]\n    }], null, null); })();\n\nclass DefaultImaskFactory {\n    create(el, opts) {\n        return IMask(el, opts);\n    }\n}\nDefaultImaskFactory.ɵfac = function DefaultImaskFactory_Factory(t) { return new (t || DefaultImaskFactory)(); };\nDefaultImaskFactory.ɵprov = i0.ɵɵdefineInjectable({ factory: function DefaultImaskFactory_Factory() { return new DefaultImaskFactory(); }, token: DefaultImaskFactory, providedIn: \"root\" });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DefaultImaskFactory, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], null, null); })();\n\nclass IMaskDirectiveModule {\n}\nIMaskDirectiveModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IMaskDirectiveModule });\nIMaskDirectiveModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IMaskDirectiveModule_Factory(t) { return new (t || IMaskDirectiveModule)(); }, providers: [{ provide: IMaskFactory, useClass: DefaultImaskFactory }], imports: [[CommonModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IMaskDirectiveModule, { declarations: function () { return [IMaskDirective]; }, imports: function () { return [CommonModule]; }, exports: function () { return [IMaskDirective]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IMaskDirectiveModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule],\n                declarations: [IMaskDirective],\n                providers: [{ provide: IMaskFactory, useClass: DefaultImaskFactory }],\n                exports: [IMaskDirective]\n            }]\n    }], null, null); })();\n\nclass IMaskModule {\n}\nIMaskModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IMaskModule });\nIMaskModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IMaskModule_Factory(t) { return new (t || IMaskModule)(); }, imports: [[CommonModule, IMaskDirectiveModule],\n        IMaskDirectiveModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IMaskModule, { declarations: function () { return [IMaskPipe]; }, imports: function () { return [CommonModule,\n        IMaskDirectiveModule]; }, exports: function () { return [IMaskPipe,\n        IMaskDirectiveModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IMaskModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule, IMaskDirectiveModule],\n                declarations: [IMaskPipe],\n                exports: [IMaskPipe, IMaskDirectiveModule]\n            }]\n    }], null, null); })();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { IMaskDirective, IMaskDirectiveModule, IMaskFactory, IMaskModule, IMaskPipe, MASKEDINPUT_VALUE_ACCESSOR, ɵ0, DefaultImaskFactory as ɵa };\n\n//# sourceMappingURL=angular-imask.js.map","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction set(target, property, value, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.set) {\n    set = Reflect.set;\n  } else {\n    set = function set(target, property, value, receiver) {\n      var base = _superPropBase(target, property);\n\n      var desc;\n\n      if (base) {\n        desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.set) {\n          desc.set.call(receiver, value);\n          return true;\n        } else if (!desc.writable) {\n          return false;\n        }\n      }\n\n      desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n      if (desc) {\n        if (!desc.writable) {\n          return false;\n        }\n\n        desc.value = value;\n        Object.defineProperty(receiver, property, desc);\n      } else {\n        _defineProperty(receiver, property, value);\n      }\n\n      return true;\n    };\n  }\n\n  return set(target, property, value, receiver);\n}\n\nfunction _set(target, property, value, receiver, isStrict) {\n  var s = set(target, property, value, receiver || target);\n\n  if (!s && isStrict) {\n    throw new Error('failed to set property');\n  }\n\n  return value;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nexport { _createClass as _, _classCallCheck as a, _objectWithoutProperties as b, _typeof as c, _inherits as d, _createSuper as e, _slicedToArray as f, _get as g, _getPrototypeOf as h, _set as i };\n","import { d as _inherits, e as _createSuper, a as _classCallCheck, _ as _createClass } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport HTMLMaskElement from './html-mask-element.js';\nimport IMask from '../core/holder.js';\nimport './mask-element.js';\n\nvar HTMLContenteditableMaskElement = /*#__PURE__*/function (_HTMLMaskElement) {\n  _inherits(HTMLContenteditableMaskElement, _HTMLMaskElement);\n\n  var _super = _createSuper(HTMLContenteditableMaskElement);\n\n  function HTMLContenteditableMaskElement() {\n    _classCallCheck(this, HTMLContenteditableMaskElement);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(HTMLContenteditableMaskElement, [{\n    key: \"_unsafeSelectionStart\",\n    get:\n    /**\n      Returns HTMLElement selection start\n      @override\n    */\n    function get() {\n      var root = this.rootElement;\n      var selection = root.getSelection && root.getSelection();\n      return selection && selection.anchorOffset;\n    }\n    /**\n      Returns HTMLElement selection end\n      @override\n    */\n\n  }, {\n    key: \"_unsafeSelectionEnd\",\n    get: function get() {\n      var root = this.rootElement;\n      var selection = root.getSelection && root.getSelection();\n      return selection && this._unsafeSelectionStart + String(selection).length;\n    }\n    /**\n      Sets HTMLElement selection\n      @override\n    */\n\n  }, {\n    key: \"_unsafeSelect\",\n    value: function _unsafeSelect(start, end) {\n      if (!this.rootElement.createRange) return;\n      var range = this.rootElement.createRange();\n      range.setStart(this.input.firstChild || this.input, start);\n      range.setEnd(this.input.lastChild || this.input, end);\n      var root = this.rootElement;\n      var selection = root.getSelection && root.getSelection();\n\n      if (selection) {\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    }\n    /**\n      HTMLElement value\n      @override\n    */\n\n  }, {\n    key: \"value\",\n    get: function get() {\n      // $FlowFixMe\n      return this.input.textContent;\n    },\n    set: function set(value) {\n      this.input.textContent = value;\n    }\n  }]);\n\n  return HTMLContenteditableMaskElement;\n}(HTMLMaskElement);\nIMask.HTMLContenteditableMaskElement = HTMLContenteditableMaskElement;\n\nexport { HTMLContenteditableMaskElement as default };\n","import { d as _inherits, e as _createSuper, a as _classCallCheck, _ as _createClass } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport MaskElement from './mask-element.js';\nimport IMask from '../core/holder.js';\n\n/** Bridge between HTMLElement and {@link Masked} */\n\nvar HTMLMaskElement = /*#__PURE__*/function (_MaskElement) {\n  _inherits(HTMLMaskElement, _MaskElement);\n\n  var _super = _createSuper(HTMLMaskElement);\n\n  /** Mapping between HTMLElement events and mask internal events */\n\n  /** HTMLElement to use mask on */\n\n  /**\n    @param {HTMLInputElement|HTMLTextAreaElement} input\n  */\n  function HTMLMaskElement(input) {\n    var _this;\n\n    _classCallCheck(this, HTMLMaskElement);\n\n    _this = _super.call(this);\n    _this.input = input;\n    _this._handlers = {};\n    return _this;\n  }\n  /** */\n  // $FlowFixMe https://github.com/facebook/flow/issues/2839\n\n\n  _createClass(HTMLMaskElement, [{\n    key: \"rootElement\",\n    get: function get() {\n      return this.input.getRootNode ? this.input.getRootNode() : document;\n    }\n    /**\n      Is element in focus\n      @readonly\n    */\n\n  }, {\n    key: \"isActive\",\n    get: function get() {\n      //$FlowFixMe\n      return this.input === this.rootElement.activeElement;\n    }\n    /**\n      Returns HTMLElement selection start\n      @override\n    */\n\n  }, {\n    key: \"_unsafeSelectionStart\",\n    get: function get() {\n      return this.input.selectionStart;\n    }\n    /**\n      Returns HTMLElement selection end\n      @override\n    */\n\n  }, {\n    key: \"_unsafeSelectionEnd\",\n    get: function get() {\n      return this.input.selectionEnd;\n    }\n    /**\n      Sets HTMLElement selection\n      @override\n    */\n\n  }, {\n    key: \"_unsafeSelect\",\n    value: function _unsafeSelect(start, end) {\n      this.input.setSelectionRange(start, end);\n    }\n    /**\n      HTMLElement value\n      @override\n    */\n\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.input.value;\n    },\n    set: function set(value) {\n      this.input.value = value;\n    }\n    /**\n      Binds HTMLElement events to mask internal events\n      @override\n    */\n\n  }, {\n    key: \"bindEvents\",\n    value: function bindEvents(handlers) {\n      var _this2 = this;\n\n      Object.keys(handlers).forEach(function (event) {\n        return _this2._toggleEventHandler(HTMLMaskElement.EVENTS_MAP[event], handlers[event]);\n      });\n    }\n    /**\n      Unbinds HTMLElement events to mask internal events\n      @override\n    */\n\n  }, {\n    key: \"unbindEvents\",\n    value: function unbindEvents() {\n      var _this3 = this;\n\n      Object.keys(this._handlers).forEach(function (event) {\n        return _this3._toggleEventHandler(event);\n      });\n    }\n    /** */\n\n  }, {\n    key: \"_toggleEventHandler\",\n    value: function _toggleEventHandler(event, handler) {\n      if (this._handlers[event]) {\n        this.input.removeEventListener(event, this._handlers[event]);\n        delete this._handlers[event];\n      }\n\n      if (handler) {\n        this.input.addEventListener(event, handler);\n        this._handlers[event] = handler;\n      }\n    }\n  }]);\n\n  return HTMLMaskElement;\n}(MaskElement);\nHTMLMaskElement.EVENTS_MAP = {\n  selectionChange: 'keydown',\n  input: 'input',\n  drop: 'drop',\n  click: 'click',\n  focus: 'focus',\n  commit: 'blur'\n};\nIMask.HTMLMaskElement = HTMLMaskElement;\n\nexport { HTMLMaskElement as default };\n","import { _ as _createClass, a as _classCallCheck, b as _objectWithoutProperties } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport { objectIncludes, DIRECTION } from '../core/utils.js';\nimport ActionDetails from '../core/action-details.js';\nimport MaskedDate from '../masked/date.js';\nimport createMask, { maskedClass } from '../masked/factory.js';\nimport MaskElement from './mask-element.js';\nimport HTMLMaskElement from './html-mask-element.js';\nimport HTMLContenteditableMaskElement from './html-contenteditable-mask-element.js';\nimport IMask from '../core/holder.js';\nimport '../masked/pattern.js';\nimport '../core/change-details.js';\nimport '../masked/base.js';\nimport '../core/continuous-tail-details.js';\nimport '../masked/pattern/input-definition.js';\nimport '../masked/pattern/fixed-definition.js';\nimport '../masked/pattern/chunk-tail-details.js';\nimport '../masked/regexp.js';\nimport '../masked/range.js';\n\nvar _excluded = [\"mask\"];\n/** Listens to element events and controls changes between element and {@link Masked} */\n\nvar InputMask = /*#__PURE__*/function () {\n  /**\n    View element\n    @readonly\n  */\n\n  /**\n    Internal {@link Masked} model\n    @readonly\n  */\n\n  /**\n    @param {MaskElement|HTMLInputElement|HTMLTextAreaElement} el\n    @param {Object} opts\n  */\n  function InputMask(el, opts) {\n    _classCallCheck(this, InputMask);\n\n    this.el = el instanceof MaskElement ? el : el.isContentEditable && el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA' ? new HTMLContenteditableMaskElement(el) : new HTMLMaskElement(el);\n    this.masked = createMask(opts);\n    this._listeners = {};\n    this._value = '';\n    this._unmaskedValue = '';\n    this._saveSelection = this._saveSelection.bind(this);\n    this._onInput = this._onInput.bind(this);\n    this._onChange = this._onChange.bind(this);\n    this._onDrop = this._onDrop.bind(this);\n    this._onFocus = this._onFocus.bind(this);\n    this._onClick = this._onClick.bind(this);\n    this.alignCursor = this.alignCursor.bind(this);\n    this.alignCursorFriendly = this.alignCursorFriendly.bind(this);\n\n    this._bindEvents(); // refresh\n\n\n    this.updateValue();\n\n    this._onChange();\n  }\n  /** Read or update mask */\n\n\n  _createClass(InputMask, [{\n    key: \"mask\",\n    get: function get() {\n      return this.masked.mask;\n    },\n    set: function set(mask) {\n      if (this.maskEquals(mask)) return;\n\n      if (!(mask instanceof IMask.Masked) && this.masked.constructor === maskedClass(mask)) {\n        this.masked.updateOptions({\n          mask: mask\n        });\n        return;\n      }\n\n      var masked = createMask({\n        mask: mask\n      });\n      masked.unmaskedValue = this.masked.unmaskedValue;\n      this.masked = masked;\n    }\n    /** Raw value */\n\n  }, {\n    key: \"maskEquals\",\n    value: function maskEquals(mask) {\n      return mask == null || mask === this.masked.mask || mask === Date && this.masked instanceof MaskedDate;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this._value;\n    },\n    set: function set(str) {\n      this.masked.value = str;\n      this.updateControl();\n      this.alignCursor();\n    }\n    /** Unmasked value */\n\n  }, {\n    key: \"unmaskedValue\",\n    get: function get() {\n      return this._unmaskedValue;\n    },\n    set: function set(str) {\n      this.masked.unmaskedValue = str;\n      this.updateControl();\n      this.alignCursor();\n    }\n    /** Typed unmasked value */\n\n  }, {\n    key: \"typedValue\",\n    get: function get() {\n      return this.masked.typedValue;\n    },\n    set: function set(val) {\n      this.masked.typedValue = val;\n      this.updateControl();\n      this.alignCursor();\n    }\n    /**\n      Starts listening to element events\n      @protected\n    */\n\n  }, {\n    key: \"_bindEvents\",\n    value: function _bindEvents() {\n      this.el.bindEvents({\n        selectionChange: this._saveSelection,\n        input: this._onInput,\n        drop: this._onDrop,\n        click: this._onClick,\n        focus: this._onFocus,\n        commit: this._onChange\n      });\n    }\n    /**\n      Stops listening to element events\n      @protected\n     */\n\n  }, {\n    key: \"_unbindEvents\",\n    value: function _unbindEvents() {\n      if (this.el) this.el.unbindEvents();\n    }\n    /**\n      Fires custom event\n      @protected\n     */\n\n  }, {\n    key: \"_fireEvent\",\n    value: function _fireEvent(ev) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var listeners = this._listeners[ev];\n      if (!listeners) return;\n      listeners.forEach(function (l) {\n        return l.apply(void 0, args);\n      });\n    }\n    /**\n      Current selection start\n      @readonly\n    */\n\n  }, {\n    key: \"selectionStart\",\n    get: function get() {\n      return this._cursorChanging ? this._changingCursorPos : this.el.selectionStart;\n    }\n    /** Current cursor position */\n\n  }, {\n    key: \"cursorPos\",\n    get: function get() {\n      return this._cursorChanging ? this._changingCursorPos : this.el.selectionEnd;\n    },\n    set: function set(pos) {\n      if (!this.el || !this.el.isActive) return;\n      this.el.select(pos, pos);\n\n      this._saveSelection();\n    }\n    /**\n      Stores current selection\n      @protected\n    */\n\n  }, {\n    key: \"_saveSelection\",\n    value: function _saveSelection() {\n      if (this.value !== this.el.value) {\n        console.warn('Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly.'); // eslint-disable-line no-console\n      }\n\n      this._selection = {\n        start: this.selectionStart,\n        end: this.cursorPos\n      };\n    }\n    /** Syncronizes model value from view */\n\n  }, {\n    key: \"updateValue\",\n    value: function updateValue() {\n      this.masked.value = this.el.value;\n      this._value = this.masked.value;\n    }\n    /** Syncronizes view from model value, fires change events */\n\n  }, {\n    key: \"updateControl\",\n    value: function updateControl() {\n      var newUnmaskedValue = this.masked.unmaskedValue;\n      var newValue = this.masked.value;\n      var isChanged = this.unmaskedValue !== newUnmaskedValue || this.value !== newValue;\n      this._unmaskedValue = newUnmaskedValue;\n      this._value = newValue;\n      if (this.el.value !== newValue) this.el.value = newValue;\n      if (isChanged) this._fireChangeEvents();\n    }\n    /** Updates options with deep equal check, recreates @{link Masked} model if mask type changes */\n\n  }, {\n    key: \"updateOptions\",\n    value: function updateOptions(opts) {\n      var mask = opts.mask,\n          restOpts = _objectWithoutProperties(opts, _excluded);\n\n      var updateMask = !this.maskEquals(mask);\n      var updateOpts = !objectIncludes(this.masked, restOpts);\n      if (updateMask) this.mask = mask;\n      if (updateOpts) this.masked.updateOptions(restOpts);\n      if (updateMask || updateOpts) this.updateControl();\n    }\n    /** Updates cursor */\n\n  }, {\n    key: \"updateCursor\",\n    value: function updateCursor(cursorPos) {\n      if (cursorPos == null) return;\n      this.cursorPos = cursorPos; // also queue change cursor for mobile browsers\n\n      this._delayUpdateCursor(cursorPos);\n    }\n    /**\n      Delays cursor update to support mobile browsers\n      @private\n    */\n\n  }, {\n    key: \"_delayUpdateCursor\",\n    value: function _delayUpdateCursor(cursorPos) {\n      var _this = this;\n\n      this._abortUpdateCursor();\n\n      this._changingCursorPos = cursorPos;\n      this._cursorChanging = setTimeout(function () {\n        if (!_this.el) return; // if was destroyed\n\n        _this.cursorPos = _this._changingCursorPos;\n\n        _this._abortUpdateCursor();\n      }, 10);\n    }\n    /**\n      Fires custom events\n      @protected\n    */\n\n  }, {\n    key: \"_fireChangeEvents\",\n    value: function _fireChangeEvents() {\n      this._fireEvent('accept', this._inputEvent);\n\n      if (this.masked.isComplete) this._fireEvent('complete', this._inputEvent);\n    }\n    /**\n      Aborts delayed cursor update\n      @private\n    */\n\n  }, {\n    key: \"_abortUpdateCursor\",\n    value: function _abortUpdateCursor() {\n      if (this._cursorChanging) {\n        clearTimeout(this._cursorChanging);\n        delete this._cursorChanging;\n      }\n    }\n    /** Aligns cursor to nearest available position */\n\n  }, {\n    key: \"alignCursor\",\n    value: function alignCursor() {\n      this.cursorPos = this.masked.nearestInputPos(this.cursorPos, DIRECTION.LEFT);\n    }\n    /** Aligns cursor only if selection is empty */\n\n  }, {\n    key: \"alignCursorFriendly\",\n    value: function alignCursorFriendly() {\n      if (this.selectionStart !== this.cursorPos) return; // skip if range is selected\n\n      this.alignCursor();\n    }\n    /** Adds listener on custom event */\n\n  }, {\n    key: \"on\",\n    value: function on(ev, handler) {\n      if (!this._listeners[ev]) this._listeners[ev] = [];\n\n      this._listeners[ev].push(handler);\n\n      return this;\n    }\n    /** Removes custom event listener */\n\n  }, {\n    key: \"off\",\n    value: function off(ev, handler) {\n      if (!this._listeners[ev]) return this;\n\n      if (!handler) {\n        delete this._listeners[ev];\n        return this;\n      }\n\n      var hIndex = this._listeners[ev].indexOf(handler);\n\n      if (hIndex >= 0) this._listeners[ev].splice(hIndex, 1);\n      return this;\n    }\n    /** Handles view input event */\n\n  }, {\n    key: \"_onInput\",\n    value: function _onInput(e) {\n      this._inputEvent = e;\n\n      this._abortUpdateCursor(); // fix strange IE behavior\n\n\n      if (!this._selection) return this.updateValue();\n      var details = new ActionDetails( // new state\n      this.el.value, this.cursorPos, // old state\n      this.value, this._selection);\n      var oldRawValue = this.masked.rawInputValue;\n      var offset = this.masked.splice(details.startChangePos, details.removed.length, details.inserted, details.removeDirection).offset; // force align in remove direction only if no input chars were removed\n      // otherwise we still need to align with NONE (to get out from fixed symbols for instance)\n\n      var removeDirection = oldRawValue === this.masked.rawInputValue ? details.removeDirection : DIRECTION.NONE;\n      var cursorPos = this.masked.nearestInputPos(details.startChangePos + offset, removeDirection);\n      this.updateControl();\n      this.updateCursor(cursorPos);\n      delete this._inputEvent;\n    }\n    /** Handles view change event and commits model value */\n\n  }, {\n    key: \"_onChange\",\n    value: function _onChange() {\n      if (this.value !== this.el.value) {\n        this.updateValue();\n      }\n\n      this.masked.doCommit();\n      this.updateControl();\n\n      this._saveSelection();\n    }\n    /** Handles view drop event, prevents by default */\n\n  }, {\n    key: \"_onDrop\",\n    value: function _onDrop(ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n    /** Restore last selection on focus */\n\n  }, {\n    key: \"_onFocus\",\n    value: function _onFocus(ev) {\n      this.alignCursorFriendly();\n    }\n    /** Restore last selection on focus */\n\n  }, {\n    key: \"_onClick\",\n    value: function _onClick(ev) {\n      this.alignCursorFriendly();\n    }\n    /** Unbind view events and removes element reference */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this._unbindEvents(); // $FlowFixMe why not do so?\n\n\n      this._listeners.length = 0; // $FlowFixMe\n\n      delete this.el;\n    }\n  }]);\n\n  return InputMask;\n}();\nIMask.InputMask = InputMask;\n\nexport { InputMask as default };\n","import { _ as _createClass, a as _classCallCheck } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport IMask from '../core/holder.js';\n\n/**\n  Generic element API to use with mask\n  @interface\n*/\nvar MaskElement = /*#__PURE__*/function () {\n  function MaskElement() {\n    _classCallCheck(this, MaskElement);\n  }\n\n  _createClass(MaskElement, [{\n    key: \"selectionStart\",\n    get:\n    /** */\n\n    /** */\n\n    /** */\n\n    /** Safely returns selection start */\n    function get() {\n      var start;\n\n      try {\n        start = this._unsafeSelectionStart;\n      } catch (e) {}\n\n      return start != null ? start : this.value.length;\n    }\n    /** Safely returns selection end */\n\n  }, {\n    key: \"selectionEnd\",\n    get: function get() {\n      var end;\n\n      try {\n        end = this._unsafeSelectionEnd;\n      } catch (e) {}\n\n      return end != null ? end : this.value.length;\n    }\n    /** Safely sets element selection */\n\n  }, {\n    key: \"select\",\n    value: function select(start, end) {\n      if (start == null || end == null || start === this.selectionStart && end === this.selectionEnd) return;\n\n      try {\n        this._unsafeSelect(start, end);\n      } catch (e) {}\n    }\n    /** Should be overriden in subclasses */\n\n  }, {\n    key: \"_unsafeSelect\",\n    value: function _unsafeSelect(start, end) {}\n    /** Should be overriden in subclasses */\n\n  }, {\n    key: \"isActive\",\n    get: function get() {\n      return false;\n    }\n    /** Should be overriden in subclasses */\n\n  }, {\n    key: \"bindEvents\",\n    value: function bindEvents(handlers) {}\n    /** Should be overriden in subclasses */\n\n  }, {\n    key: \"unbindEvents\",\n    value: function unbindEvents() {}\n  }]);\n\n  return MaskElement;\n}();\nIMask.MaskElement = MaskElement;\n\nexport { MaskElement as default };\n","import { _ as _createClass, a as _classCallCheck } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport { DIRECTION } from './utils.js';\n\n/** Provides details of changing input */\n\nvar ActionDetails = /*#__PURE__*/function () {\n  /** Current input value */\n\n  /** Current cursor position */\n\n  /** Old input value */\n\n  /** Old selection */\n  function ActionDetails(value, cursorPos, oldValue, oldSelection) {\n    _classCallCheck(this, ActionDetails);\n\n    this.value = value;\n    this.cursorPos = cursorPos;\n    this.oldValue = oldValue;\n    this.oldSelection = oldSelection; // double check if left part was changed (autofilling, other non-standard input triggers)\n\n    while (this.value.slice(0, this.startChangePos) !== this.oldValue.slice(0, this.startChangePos)) {\n      --this.oldSelection.start;\n    }\n  }\n  /**\n    Start changing position\n    @readonly\n  */\n\n\n  _createClass(ActionDetails, [{\n    key: \"startChangePos\",\n    get: function get() {\n      return Math.min(this.cursorPos, this.oldSelection.start);\n    }\n    /**\n      Inserted symbols count\n      @readonly\n    */\n\n  }, {\n    key: \"insertedCount\",\n    get: function get() {\n      return this.cursorPos - this.startChangePos;\n    }\n    /**\n      Inserted symbols\n      @readonly\n    */\n\n  }, {\n    key: \"inserted\",\n    get: function get() {\n      return this.value.substr(this.startChangePos, this.insertedCount);\n    }\n    /**\n      Removed symbols count\n      @readonly\n    */\n\n  }, {\n    key: \"removedCount\",\n    get: function get() {\n      // Math.max for opposite operation\n      return Math.max(this.oldSelection.end - this.startChangePos || // for Delete\n      this.oldValue.length - this.value.length, 0);\n    }\n    /**\n      Removed symbols\n      @readonly\n    */\n\n  }, {\n    key: \"removed\",\n    get: function get() {\n      return this.oldValue.substr(this.startChangePos, this.removedCount);\n    }\n    /**\n      Unchanged head symbols\n      @readonly\n    */\n\n  }, {\n    key: \"head\",\n    get: function get() {\n      return this.value.substring(0, this.startChangePos);\n    }\n    /**\n      Unchanged tail symbols\n      @readonly\n    */\n\n  }, {\n    key: \"tail\",\n    get: function get() {\n      return this.value.substring(this.startChangePos + this.insertedCount);\n    }\n    /**\n      Remove direction\n      @readonly\n    */\n\n  }, {\n    key: \"removeDirection\",\n    get: function get() {\n      if (!this.removedCount || this.insertedCount) return DIRECTION.NONE; // align right if delete at right or if range removed (event with backspace)\n\n      return this.oldSelection.end === this.cursorPos || this.oldSelection.start === this.cursorPos ? DIRECTION.RIGHT : DIRECTION.LEFT;\n    }\n  }]);\n\n  return ActionDetails;\n}();\n\nexport { ActionDetails as default };\n","import { _ as _createClass, a as _classCallCheck } from '../_rollupPluginBabelHelpers-a0b34764.js';\n\n/**\n  Provides details of changing model value\n  @param {Object} [details]\n  @param {string} [details.inserted] - Inserted symbols\n  @param {boolean} [details.skip] - Can skip chars\n  @param {number} [details.removeCount] - Removed symbols count\n  @param {number} [details.tailShift] - Additional offset if any changes occurred before tail\n*/\nvar ChangeDetails = /*#__PURE__*/function () {\n  /** Inserted symbols */\n\n  /** Can skip chars */\n\n  /** Additional offset if any changes occurred before tail */\n\n  /** Raw inserted is used by dynamic mask */\n  function ChangeDetails(details) {\n    _classCallCheck(this, ChangeDetails);\n\n    Object.assign(this, {\n      inserted: '',\n      rawInserted: '',\n      skip: false,\n      tailShift: 0\n    }, details);\n  }\n  /**\n    Aggregate changes\n    @returns {ChangeDetails} `this`\n  */\n\n\n  _createClass(ChangeDetails, [{\n    key: \"aggregate\",\n    value: function aggregate(details) {\n      this.rawInserted += details.rawInserted;\n      this.skip = this.skip || details.skip;\n      this.inserted += details.inserted;\n      this.tailShift += details.tailShift;\n      return this;\n    }\n    /** Total offset considering all changes */\n\n  }, {\n    key: \"offset\",\n    get: function get() {\n      return this.tailShift + this.inserted.length;\n    }\n  }]);\n\n  return ChangeDetails;\n}();\n\nexport { ChangeDetails as default };\n","import { _ as _createClass, a as _classCallCheck } from '../_rollupPluginBabelHelpers-a0b34764.js';\n\n/** Provides details of continuous extracted tail */\nvar ContinuousTailDetails = /*#__PURE__*/function () {\n  /** Tail value as string */\n\n  /** Tail start position */\n\n  /** Start position */\n  function ContinuousTailDetails() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var from = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var stop = arguments.length > 2 ? arguments[2] : undefined;\n\n    _classCallCheck(this, ContinuousTailDetails);\n\n    this.value = value;\n    this.from = from;\n    this.stop = stop;\n  }\n\n  _createClass(ContinuousTailDetails, [{\n    key: \"toString\",\n    value: function toString() {\n      return this.value;\n    }\n  }, {\n    key: \"extend\",\n    value: function extend(tail) {\n      this.value += String(tail);\n    }\n  }, {\n    key: \"appendTo\",\n    value: function appendTo(masked) {\n      return masked.append(this.toString(), {\n        tail: true\n      }).aggregate(masked._appendPlaceholder());\n    }\n  }, {\n    key: \"state\",\n    get: function get() {\n      return {\n        value: this.value,\n        from: this.from,\n        stop: this.stop\n      };\n    },\n    set: function set(state) {\n      Object.assign(this, state);\n    }\n  }, {\n    key: \"shiftBefore\",\n    value: function shiftBefore(pos) {\n      if (this.from >= pos || !this.value.length) return '';\n      var shiftChar = this.value[0];\n      this.value = this.value.slice(1);\n      return shiftChar;\n    }\n  }]);\n\n  return ContinuousTailDetails;\n}();\n\nexport { ContinuousTailDetails as default };\n","/**\n * Applies mask on element.\n * @constructor\n * @param {HTMLInputElement|HTMLTextAreaElement|MaskElement} el - Element to apply mask\n * @param {Object} opts - Custom mask options\n * @return {InputMask}\n */\nfunction IMask(el) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  // currently available only for input-like elements\n  return new IMask.InputMask(el, opts);\n}\n\nexport { IMask as default };\n","import { c as _typeof } from '../_rollupPluginBabelHelpers-a0b34764.js';\n\n/** Checks if value is string */\nfunction isString(str) {\n  return typeof str === 'string' || str instanceof String;\n}\n/**\n  Direction\n  @prop {string} NONE\n  @prop {string} LEFT\n  @prop {string} FORCE_LEFT\n  @prop {string} RIGHT\n  @prop {string} FORCE_RIGHT\n*/\n\nvar DIRECTION = {\n  NONE: 'NONE',\n  LEFT: 'LEFT',\n  FORCE_LEFT: 'FORCE_LEFT',\n  RIGHT: 'RIGHT',\n  FORCE_RIGHT: 'FORCE_RIGHT'\n};\n/**\n  Direction\n  @enum {string}\n*/\n\n/** Returns next char index in direction */\nfunction indexInDirection(pos, direction) {\n  if (direction === DIRECTION.LEFT) --pos;\n  return pos;\n}\n/** Returns next char position in direction */\n\nfunction posInDirection(pos, direction) {\n  switch (direction) {\n    case DIRECTION.LEFT:\n    case DIRECTION.FORCE_LEFT:\n      return --pos;\n\n    case DIRECTION.RIGHT:\n    case DIRECTION.FORCE_RIGHT:\n      return ++pos;\n\n    default:\n      return pos;\n  }\n}\n/** */\n\nfunction forceDirection(direction) {\n  switch (direction) {\n    case DIRECTION.LEFT:\n      return DIRECTION.FORCE_LEFT;\n\n    case DIRECTION.RIGHT:\n      return DIRECTION.FORCE_RIGHT;\n\n    default:\n      return direction;\n  }\n}\n/** Escapes regular expression control chars */\n\nfunction escapeRegExp(str) {\n  return str.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n} // cloned from https://github.com/epoberezkin/fast-deep-equal with small changes\n\nfunction objectIncludes(b, a) {\n  if (a === b) return true;\n  var arrA = Array.isArray(a),\n      arrB = Array.isArray(b),\n      i;\n\n  if (arrA && arrB) {\n    if (a.length != b.length) return false;\n\n    for (i = 0; i < a.length; i++) {\n      if (!objectIncludes(a[i], b[i])) return false;\n    }\n\n    return true;\n  }\n\n  if (arrA != arrB) return false;\n\n  if (a && b && _typeof(a) === 'object' && _typeof(b) === 'object') {\n    var dateA = a instanceof Date,\n        dateB = b instanceof Date;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n    if (dateA != dateB) return false;\n    var regexpA = a instanceof RegExp,\n        regexpB = b instanceof RegExp;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n    if (regexpA != regexpB) return false;\n    var keys = Object.keys(a); // if (keys.length !== Object.keys(b).length) return false;\n\n    for (i = 0; i < keys.length; i++) {\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    }\n\n    for (i = 0; i < keys.length; i++) {\n      if (!objectIncludes(b[keys[i]], a[keys[i]])) return false;\n    }\n\n    return true;\n  } else if (a && b && typeof a === 'function' && typeof b === 'function') {\n    return a.toString() === b.toString();\n  }\n\n  return false;\n}\n/** Selection range */\n\nexport { DIRECTION, escapeRegExp, forceDirection, indexInDirection, isString, objectIncludes, posInDirection };\n","export { default as InputMask } from './controls/input.js';\nimport IMask from './core/holder.js';\nexport { default } from './core/holder.js';\nexport { default as Masked } from './masked/base.js';\nexport { default as MaskedPattern } from './masked/pattern.js';\nexport { default as MaskedEnum } from './masked/enum.js';\nexport { default as MaskedRange } from './masked/range.js';\nexport { default as MaskedNumber } from './masked/number.js';\nexport { default as MaskedDate } from './masked/date.js';\nexport { default as MaskedRegExp } from './masked/regexp.js';\nexport { default as MaskedFunction } from './masked/function.js';\nexport { default as MaskedDynamic } from './masked/dynamic.js';\nexport { default as createMask } from './masked/factory.js';\nexport { default as MaskElement } from './controls/mask-element.js';\nexport { default as HTMLMaskElement } from './controls/html-mask-element.js';\nexport { default as HTMLContenteditableMaskElement } from './controls/html-contenteditable-mask-element.js';\nexport { PIPE_TYPE, createPipe, pipe } from './masked/pipe.js';\nimport './_rollupPluginBabelHelpers-a0b34764.js';\nimport './core/utils.js';\nimport './core/action-details.js';\nimport './core/change-details.js';\nimport './core/continuous-tail-details.js';\nimport './masked/pattern/input-definition.js';\nimport './masked/pattern/fixed-definition.js';\nimport './masked/pattern/chunk-tail-details.js';\n\ntry {\n  globalThis.IMask = IMask;\n} catch (e) {}\n","import { _ as _createClass, a as _classCallCheck } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport ChangeDetails from '../core/change-details.js';\nimport ContinuousTailDetails from '../core/continuous-tail-details.js';\nimport { isString } from '../core/utils.js';\nimport IMask from '../core/holder.js';\n\n/** Supported mask type */\n\n/** Provides common masking stuff */\nvar Masked = /*#__PURE__*/function () {\n  // $Shape<MaskedOptions>; TODO after fix https://github.com/facebook/flow/issues/4773\n\n  /** @type {Mask} */\n\n  /** */\n  // $FlowFixMe no ideas\n\n  /** Transforms value before mask processing */\n\n  /** Validates if value is acceptable */\n\n  /** Does additional processing in the end of editing */\n\n  /** Format typed value to string */\n\n  /** Parse strgin to get typed value */\n\n  /** Enable characters overwriting */\n\n  /** */\n  function Masked(opts) {\n    _classCallCheck(this, Masked);\n\n    this._value = '';\n\n    this._update(Object.assign({}, Masked.DEFAULTS, opts));\n\n    this.isInitialized = true;\n  }\n  /** Sets and applies new options */\n\n\n  _createClass(Masked, [{\n    key: \"updateOptions\",\n    value: function updateOptions(opts) {\n      if (!Object.keys(opts).length) return;\n      this.withValueRefresh(this._update.bind(this, opts));\n    }\n    /**\n      Sets new options\n      @protected\n    */\n\n  }, {\n    key: \"_update\",\n    value: function _update(opts) {\n      Object.assign(this, opts);\n    }\n    /** Mask state */\n\n  }, {\n    key: \"state\",\n    get: function get() {\n      return {\n        _value: this.value\n      };\n    },\n    set: function set(state) {\n      this._value = state._value;\n    }\n    /** Resets value */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._value = '';\n    }\n    /** */\n\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this._value;\n    },\n    set: function set(value) {\n      this.resolve(value);\n    }\n    /** Resolve new value */\n\n  }, {\n    key: \"resolve\",\n    value: function resolve(value) {\n      this.reset();\n      this.append(value, {\n        input: true\n      }, '');\n      this.doCommit();\n      return this.value;\n    }\n    /** */\n\n  }, {\n    key: \"unmaskedValue\",\n    get: function get() {\n      return this.value;\n    },\n    set: function set(value) {\n      this.reset();\n      this.append(value, {}, '');\n      this.doCommit();\n    }\n    /** */\n\n  }, {\n    key: \"typedValue\",\n    get: function get() {\n      return this.doParse(this.value);\n    },\n    set: function set(value) {\n      this.value = this.doFormat(value);\n    }\n    /** Value that includes raw user input */\n\n  }, {\n    key: \"rawInputValue\",\n    get: function get() {\n      return this.extractInput(0, this.value.length, {\n        raw: true\n      });\n    },\n    set: function set(value) {\n      this.reset();\n      this.append(value, {\n        raw: true\n      }, '');\n      this.doCommit();\n    }\n    /** */\n\n  }, {\n    key: \"isComplete\",\n    get: function get() {\n      return true;\n    }\n    /** Finds nearest input position in direction */\n\n  }, {\n    key: \"nearestInputPos\",\n    value: function nearestInputPos(cursorPos, direction) {\n      return cursorPos;\n    }\n    /** Extracts value in range considering flags */\n\n  }, {\n    key: \"extractInput\",\n    value: function extractInput() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      return this.value.slice(fromPos, toPos);\n    }\n    /** Extracts tail in range */\n\n  }, {\n    key: \"extractTail\",\n    value: function extractTail() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      return new ContinuousTailDetails(this.extractInput(fromPos, toPos), fromPos);\n    }\n    /** Appends tail */\n    // $FlowFixMe no ideas\n\n  }, {\n    key: \"appendTail\",\n    value: function appendTail(tail) {\n      if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n      return tail.appendTo(this);\n    }\n    /** Appends char */\n\n  }, {\n    key: \"_appendCharRaw\",\n    value: function _appendCharRaw(ch) {\n      if (!ch) return new ChangeDetails();\n      this._value += ch;\n      return new ChangeDetails({\n        inserted: ch,\n        rawInserted: ch\n      });\n    }\n    /** Appends char */\n\n  }, {\n    key: \"_appendChar\",\n    value: function _appendChar(ch) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var checkTail = arguments.length > 2 ? arguments[2] : undefined;\n      var consistentState = this.state;\n\n      var details = this._appendCharRaw(this.doPrepare(ch, flags), flags);\n\n      if (details.inserted) {\n        var consistentTail;\n        var appended = this.doValidate(flags) !== false;\n\n        if (appended && checkTail != null) {\n          // validation ok, check tail\n          var beforeTailState = this.state;\n\n          if (this.overwrite) {\n            consistentTail = checkTail.state;\n            checkTail.shiftBefore(this.value.length);\n          }\n\n          var tailDetails = this.appendTail(checkTail);\n          appended = tailDetails.rawInserted === checkTail.toString(); // if ok, rollback state after tail\n\n          if (appended && tailDetails.inserted) this.state = beforeTailState;\n        } // revert all if something went wrong\n\n\n        if (!appended) {\n          details = new ChangeDetails();\n          this.state = consistentState;\n          if (checkTail && consistentTail) checkTail.state = consistentTail;\n        }\n      }\n\n      return details;\n    }\n    /** Appends optional placeholder at end */\n\n  }, {\n    key: \"_appendPlaceholder\",\n    value: function _appendPlaceholder() {\n      return new ChangeDetails();\n    }\n    /** Appends symbols considering flags */\n    // $FlowFixMe no ideas\n\n  }, {\n    key: \"append\",\n    value: function append(str, flags, tail) {\n      if (!isString(str)) throw new Error('value should be string');\n      var details = new ChangeDetails();\n      var checkTail = isString(tail) ? new ContinuousTailDetails(String(tail)) : tail;\n      if (flags && flags.tail) flags._beforeTailState = this.state;\n\n      for (var ci = 0; ci < str.length; ++ci) {\n        details.aggregate(this._appendChar(str[ci], flags, checkTail));\n      } // append tail but aggregate only tailShift\n\n\n      if (checkTail != null) {\n        details.tailShift += this.appendTail(checkTail).tailShift; // TODO it's a good idea to clear state after appending ends\n        // but it causes bugs when one append calls another (when dynamic dispatch set rawInputValue)\n        // this._resetBeforeTailState();\n      }\n\n      return details;\n    }\n    /** */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      this._value = this.value.slice(0, fromPos) + this.value.slice(toPos);\n      return new ChangeDetails();\n    }\n    /** Calls function and reapplies current value */\n\n  }, {\n    key: \"withValueRefresh\",\n    value: function withValueRefresh(fn) {\n      if (this._refreshing || !this.isInitialized) return fn();\n      this._refreshing = true;\n      var rawInput = this.rawInputValue;\n      var value = this.value;\n      var ret = fn();\n      this.rawInputValue = rawInput; // append lost trailing chars at end\n\n      if (this.value && this.value !== value && value.indexOf(this.value) === 0) {\n        this.append(value.slice(this.value.length), {}, '');\n      }\n\n      delete this._refreshing;\n      return ret;\n    }\n    /** */\n\n  }, {\n    key: \"runIsolated\",\n    value: function runIsolated(fn) {\n      if (this._isolated || !this.isInitialized) return fn(this);\n      this._isolated = true;\n      var state = this.state;\n      var ret = fn(this);\n      this.state = state;\n      delete this._isolated;\n      return ret;\n    }\n    /**\n      Prepares string before mask processing\n      @protected\n    */\n\n  }, {\n    key: \"doPrepare\",\n    value: function doPrepare(str) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return this.prepare ? this.prepare(str, this, flags) : str;\n    }\n    /**\n      Validates if value is acceptable\n      @protected\n    */\n\n  }, {\n    key: \"doValidate\",\n    value: function doValidate(flags) {\n      return (!this.validate || this.validate(this.value, this, flags)) && (!this.parent || this.parent.doValidate(flags));\n    }\n    /**\n      Does additional processing in the end of editing\n      @protected\n    */\n\n  }, {\n    key: \"doCommit\",\n    value: function doCommit() {\n      if (this.commit) this.commit(this.value, this);\n    }\n    /** */\n\n  }, {\n    key: \"doFormat\",\n    value: function doFormat(value) {\n      return this.format ? this.format(value, this) : value;\n    }\n    /** */\n\n  }, {\n    key: \"doParse\",\n    value: function doParse(str) {\n      return this.parse ? this.parse(str, this) : str;\n    }\n    /** */\n\n  }, {\n    key: \"splice\",\n    value: function splice(start, deleteCount, inserted, removeDirection) {\n      var tailPos = start + deleteCount;\n      var tail = this.extractTail(tailPos);\n      var startChangePos = this.nearestInputPos(start, removeDirection);\n      var changeDetails = new ChangeDetails({\n        tailShift: startChangePos - start // adjust tailShift if start was aligned\n\n      }).aggregate(this.remove(startChangePos)).aggregate(this.append(inserted, {\n        input: true\n      }, tail));\n      return changeDetails;\n    }\n  }]);\n\n  return Masked;\n}();\nMasked.DEFAULTS = {\n  format: function format(v) {\n    return v;\n  },\n  parse: function parse(v) {\n    return v;\n  }\n};\nIMask.Masked = Masked;\n\nexport { Masked as default };\n","import { d as _inherits, e as _createSuper, a as _classCallCheck, _ as _createClass, f as _slicedToArray, g as _get, h as _getPrototypeOf, i as _set } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport MaskedPattern from './pattern.js';\nimport MaskedRange from './range.js';\nimport IMask from '../core/holder.js';\nimport '../core/utils.js';\nimport '../core/change-details.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './pattern/input-definition.js';\nimport './factory.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/chunk-tail-details.js';\nimport './regexp.js';\n\n/** Date mask */\n\nvar MaskedDate = /*#__PURE__*/function (_MaskedPattern) {\n  _inherits(MaskedDate, _MaskedPattern);\n\n  var _super = _createSuper(MaskedDate);\n\n  /** Pattern mask for date according to {@link MaskedDate#format} */\n\n  /** Start date */\n\n  /** End date */\n\n  /** */\n\n  /**\n    @param {Object} opts\n  */\n  function MaskedDate(opts) {\n    _classCallCheck(this, MaskedDate);\n\n    return _super.call(this, Object.assign({}, MaskedDate.DEFAULTS, opts));\n  }\n  /**\n    @override\n  */\n\n\n  _createClass(MaskedDate, [{\n    key: \"_update\",\n    value: function _update(opts) {\n      if (opts.mask === Date) delete opts.mask;\n      if (opts.pattern) opts.mask = opts.pattern;\n      var blocks = opts.blocks;\n      opts.blocks = Object.assign({}, MaskedDate.GET_DEFAULT_BLOCKS()); // adjust year block\n\n      if (opts.min) opts.blocks.Y.from = opts.min.getFullYear();\n      if (opts.max) opts.blocks.Y.to = opts.max.getFullYear();\n\n      if (opts.min && opts.max && opts.blocks.Y.from === opts.blocks.Y.to) {\n        opts.blocks.m.from = opts.min.getMonth() + 1;\n        opts.blocks.m.to = opts.max.getMonth() + 1;\n\n        if (opts.blocks.m.from === opts.blocks.m.to) {\n          opts.blocks.d.from = opts.min.getDate();\n          opts.blocks.d.to = opts.max.getDate();\n        }\n      }\n\n      Object.assign(opts.blocks, blocks); // add autofix\n\n      Object.keys(opts.blocks).forEach(function (bk) {\n        var b = opts.blocks[bk];\n        if (!('autofix' in b)) b.autofix = opts.autofix;\n      });\n\n      _get(_getPrototypeOf(MaskedDate.prototype), \"_update\", this).call(this, opts);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"doValidate\",\n    value: function doValidate() {\n      var _get2;\n\n      var date = this.date;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_get2 = _get(_getPrototypeOf(MaskedDate.prototype), \"doValidate\", this)).call.apply(_get2, [this].concat(args)) && (!this.isComplete || this.isDateExist(this.value) && date != null && (this.min == null || this.min <= date) && (this.max == null || date <= this.max));\n    }\n    /** Checks if date is exists */\n\n  }, {\n    key: \"isDateExist\",\n    value: function isDateExist(str) {\n      return this.format(this.parse(str, this), this).indexOf(str) >= 0;\n    }\n    /** Parsed Date */\n\n  }, {\n    key: \"date\",\n    get: function get() {\n      return this.typedValue;\n    },\n    set: function set(date) {\n      this.typedValue = date;\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"typedValue\",\n    get: function get() {\n      return this.isComplete ? _get(_getPrototypeOf(MaskedDate.prototype), \"typedValue\", this) : null;\n    },\n    set: function set(value) {\n      _set(_getPrototypeOf(MaskedDate.prototype), \"typedValue\", value, this, true);\n    }\n  }]);\n\n  return MaskedDate;\n}(MaskedPattern);\nMaskedDate.DEFAULTS = {\n  pattern: 'd{.}`m{.}`Y',\n  format: function format(date) {\n    var day = String(date.getDate()).padStart(2, '0');\n    var month = String(date.getMonth() + 1).padStart(2, '0');\n    var year = date.getFullYear();\n    return [day, month, year].join('.');\n  },\n  parse: function parse(str) {\n    var _str$split = str.split('.'),\n        _str$split2 = _slicedToArray(_str$split, 3),\n        day = _str$split2[0],\n        month = _str$split2[1],\n        year = _str$split2[2];\n\n    return new Date(year, month - 1, day);\n  }\n};\n\nMaskedDate.GET_DEFAULT_BLOCKS = function () {\n  return {\n    d: {\n      mask: MaskedRange,\n      from: 1,\n      to: 31,\n      maxLength: 2\n    },\n    m: {\n      mask: MaskedRange,\n      from: 1,\n      to: 12,\n      maxLength: 2\n    },\n    Y: {\n      mask: MaskedRange,\n      from: 1900,\n      to: 9999\n    }\n  };\n};\n\nIMask.MaskedDate = MaskedDate;\n\nexport { MaskedDate as default };\n","import { d as _inherits, e as _createSuper, a as _classCallCheck, _ as _createClass, g as _get, h as _getPrototypeOf, i as _set, b as _objectWithoutProperties } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport ChangeDetails from '../core/change-details.js';\nimport createMask from './factory.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/utils.js';\nimport '../core/continuous-tail-details.js';\n\nvar _excluded = [\"compiledMasks\", \"currentMaskRef\", \"currentMask\"];\n\n/** Dynamic mask for choosing apropriate mask in run-time */\nvar MaskedDynamic = /*#__PURE__*/function (_Masked) {\n  _inherits(MaskedDynamic, _Masked);\n\n  var _super = _createSuper(MaskedDynamic);\n\n  /** Currently chosen mask */\n\n  /** Compliled {@link Masked} options */\n\n  /** Chooses {@link Masked} depending on input value */\n\n  /**\n    @param {Object} opts\n  */\n  function MaskedDynamic(opts) {\n    var _this;\n\n    _classCallCheck(this, MaskedDynamic);\n\n    _this = _super.call(this, Object.assign({}, MaskedDynamic.DEFAULTS, opts));\n    _this.currentMask = null;\n    return _this;\n  }\n  /**\n    @override\n  */\n\n\n  _createClass(MaskedDynamic, [{\n    key: \"_update\",\n    value: function _update(opts) {\n      _get(_getPrototypeOf(MaskedDynamic.prototype), \"_update\", this).call(this, opts);\n\n      if ('mask' in opts) {\n        // mask could be totally dynamic with only `dispatch` option\n        this.compiledMasks = Array.isArray(opts.mask) ? opts.mask.map(function (m) {\n          return createMask(m);\n        }) : [];\n      }\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"_appendCharRaw\",\n    value: function _appendCharRaw(ch) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var details = this._applyDispatch(ch, flags);\n\n      if (this.currentMask) {\n        details.aggregate(this.currentMask._appendChar(ch, flags));\n      }\n\n      return details;\n    }\n  }, {\n    key: \"_applyDispatch\",\n    value: function _applyDispatch() {\n      var appended = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var prevValueBeforeTail = flags.tail && flags._beforeTailState != null ? flags._beforeTailState._value : this.value;\n      var inputValue = this.rawInputValue;\n      var insertValue = flags.tail && flags._beforeTailState != null ? // $FlowFixMe - tired to fight with type system\n      flags._beforeTailState._rawInputValue : inputValue;\n      var tailValue = inputValue.slice(insertValue.length);\n      var prevMask = this.currentMask;\n      var details = new ChangeDetails();\n      var prevMaskState = prevMask && prevMask.state; // clone flags to prevent overwriting `_beforeTailState`\n\n      this.currentMask = this.doDispatch(appended, Object.assign({}, flags)); // restore state after dispatch\n\n      if (this.currentMask) {\n        if (this.currentMask !== prevMask) {\n          // if mask changed reapply input\n          this.currentMask.reset();\n\n          if (insertValue) {\n            // $FlowFixMe - it's ok, we don't change current mask above\n            var d = this.currentMask.append(insertValue, {\n              raw: true\n            });\n            details.tailShift = d.inserted.length - prevValueBeforeTail.length;\n          }\n\n          if (tailValue) {\n            // $FlowFixMe - it's ok, we don't change current mask above\n            details.tailShift += this.currentMask.append(tailValue, {\n              raw: true,\n              tail: true\n            }).tailShift;\n          }\n        } else {\n          // Dispatch can do something bad with state, so\n          // restore prev mask state\n          this.currentMask.state = prevMaskState;\n        }\n      }\n\n      return details;\n    }\n  }, {\n    key: \"_appendPlaceholder\",\n    value: function _appendPlaceholder() {\n      var details = this._applyDispatch.apply(this, arguments);\n\n      if (this.currentMask) {\n        details.aggregate(this.currentMask._appendPlaceholder());\n      }\n\n      return details;\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"doDispatch\",\n    value: function doDispatch(appended) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return this.dispatch(appended, this, flags);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"doValidate\",\n    value: function doValidate() {\n      var _get2, _this$currentMask;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_get2 = _get(_getPrototypeOf(MaskedDynamic.prototype), \"doValidate\", this)).call.apply(_get2, [this].concat(args)) && (!this.currentMask || (_this$currentMask = this.currentMask).doValidate.apply(_this$currentMask, args));\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.currentMask) this.currentMask.reset();\n      this.compiledMasks.forEach(function (m) {\n        return m.reset();\n      });\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.currentMask ? this.currentMask.value : '';\n    },\n    set: function set(value) {\n      _set(_getPrototypeOf(MaskedDynamic.prototype), \"value\", value, this, true);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"unmaskedValue\",\n    get: function get() {\n      return this.currentMask ? this.currentMask.unmaskedValue : '';\n    },\n    set: function set(unmaskedValue) {\n      _set(_getPrototypeOf(MaskedDynamic.prototype), \"unmaskedValue\", unmaskedValue, this, true);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"typedValue\",\n    get: function get() {\n      return this.currentMask ? this.currentMask.typedValue : '';\n    } // probably typedValue should not be used with dynamic\n    ,\n    set: function set(value) {\n      var unmaskedValue = String(value); // double check it\n\n      if (this.currentMask) {\n        this.currentMask.typedValue = value;\n        unmaskedValue = this.currentMask.unmaskedValue;\n      }\n\n      this.unmaskedValue = unmaskedValue;\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"isComplete\",\n    get: function get() {\n      return !!this.currentMask && this.currentMask.isComplete;\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var details = new ChangeDetails();\n\n      if (this.currentMask) {\n        var _this$currentMask2;\n\n        details.aggregate((_this$currentMask2 = this.currentMask).remove.apply(_this$currentMask2, arguments)) // update with dispatch\n        .aggregate(this._applyDispatch());\n      }\n\n      return details;\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"state\",\n    get: function get() {\n      return Object.assign({}, _get(_getPrototypeOf(MaskedDynamic.prototype), \"state\", this), {\n        _rawInputValue: this.rawInputValue,\n        compiledMasks: this.compiledMasks.map(function (m) {\n          return m.state;\n        }),\n        currentMaskRef: this.currentMask,\n        currentMask: this.currentMask && this.currentMask.state\n      });\n    },\n    set: function set(state) {\n      var compiledMasks = state.compiledMasks,\n          currentMaskRef = state.currentMaskRef,\n          currentMask = state.currentMask,\n          maskedState = _objectWithoutProperties(state, _excluded);\n\n      this.compiledMasks.forEach(function (m, mi) {\n        return m.state = compiledMasks[mi];\n      });\n\n      if (currentMaskRef != null) {\n        this.currentMask = currentMaskRef;\n        this.currentMask.state = currentMask;\n      }\n\n      _set(_getPrototypeOf(MaskedDynamic.prototype), \"state\", maskedState, this, true);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"extractInput\",\n    value: function extractInput() {\n      var _this$currentMask3;\n\n      return this.currentMask ? (_this$currentMask3 = this.currentMask).extractInput.apply(_this$currentMask3, arguments) : '';\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"extractTail\",\n    value: function extractTail() {\n      var _this$currentMask4, _get3;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return this.currentMask ? (_this$currentMask4 = this.currentMask).extractTail.apply(_this$currentMask4, args) : (_get3 = _get(_getPrototypeOf(MaskedDynamic.prototype), \"extractTail\", this)).call.apply(_get3, [this].concat(args));\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"doCommit\",\n    value: function doCommit() {\n      if (this.currentMask) this.currentMask.doCommit();\n\n      _get(_getPrototypeOf(MaskedDynamic.prototype), \"doCommit\", this).call(this);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"nearestInputPos\",\n    value: function nearestInputPos() {\n      var _this$currentMask5, _get4;\n\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return this.currentMask ? (_this$currentMask5 = this.currentMask).nearestInputPos.apply(_this$currentMask5, args) : (_get4 = _get(_getPrototypeOf(MaskedDynamic.prototype), \"nearestInputPos\", this)).call.apply(_get4, [this].concat(args));\n    }\n  }, {\n    key: \"overwrite\",\n    get: function get() {\n      return this.currentMask ? this.currentMask.overwrite : _get(_getPrototypeOf(MaskedDynamic.prototype), \"overwrite\", this);\n    },\n    set: function set(overwrite) {\n      console.warn('\"overwrite\" option is not available in dynamic mask, use this option in siblings');\n    }\n  }]);\n\n  return MaskedDynamic;\n}(Masked);\nMaskedDynamic.DEFAULTS = {\n  dispatch: function dispatch(appended, masked, flags) {\n    if (!masked.compiledMasks.length) return;\n    var inputValue = masked.rawInputValue; // simulate input\n\n    var inputs = masked.compiledMasks.map(function (m, index) {\n      m.reset();\n      m.append(inputValue, {\n        raw: true\n      });\n      m.append(appended, flags);\n      var weight = m.rawInputValue.length;\n      return {\n        weight: weight,\n        index: index\n      };\n    }); // pop masks with longer values first\n\n    inputs.sort(function (i1, i2) {\n      return i2.weight - i1.weight;\n    });\n    return masked.compiledMasks[inputs[0].index];\n  }\n};\nIMask.MaskedDynamic = MaskedDynamic;\n\nexport { MaskedDynamic as default };\n","import { d as _inherits, e as _createSuper, a as _classCallCheck, _ as _createClass, g as _get, h as _getPrototypeOf } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport MaskedPattern from './pattern.js';\nimport IMask from '../core/holder.js';\nimport '../core/utils.js';\nimport '../core/change-details.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './pattern/input-definition.js';\nimport './factory.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/chunk-tail-details.js';\nimport './regexp.js';\n\n/** Pattern which validates enum values */\n\nvar MaskedEnum = /*#__PURE__*/function (_MaskedPattern) {\n  _inherits(MaskedEnum, _MaskedPattern);\n\n  var _super = _createSuper(MaskedEnum);\n\n  function MaskedEnum() {\n    _classCallCheck(this, MaskedEnum);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(MaskedEnum, [{\n    key: \"_update\",\n    value:\n    /**\n      @override\n      @param {Object} opts\n    */\n    function _update(opts) {\n      // TODO type\n      if (opts.enum) opts.mask = '*'.repeat(opts.enum[0].length);\n\n      _get(_getPrototypeOf(MaskedEnum.prototype), \"_update\", this).call(this, opts);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"doValidate\",\n    value: function doValidate() {\n      var _this = this,\n          _get2;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.enum.some(function (e) {\n        return e.indexOf(_this.unmaskedValue) >= 0;\n      }) && (_get2 = _get(_getPrototypeOf(MaskedEnum.prototype), \"doValidate\", this)).call.apply(_get2, [this].concat(args));\n    }\n  }]);\n\n  return MaskedEnum;\n}(MaskedPattern);\nIMask.MaskedEnum = MaskedEnum;\n\nexport { MaskedEnum as default };\n","import { isString } from '../core/utils.js';\nimport IMask from '../core/holder.js';\nimport '../_rollupPluginBabelHelpers-a0b34764.js';\n\n/** Get Masked class by mask type */\n\nfunction maskedClass(mask) {\n  if (mask == null) {\n    throw new Error('mask property should be defined');\n  } // $FlowFixMe\n\n\n  if (mask instanceof RegExp) return IMask.MaskedRegExp; // $FlowFixMe\n\n  if (isString(mask)) return IMask.MaskedPattern; // $FlowFixMe\n\n  if (mask instanceof Date || mask === Date) return IMask.MaskedDate; // $FlowFixMe\n\n  if (mask instanceof Number || typeof mask === 'number' || mask === Number) return IMask.MaskedNumber; // $FlowFixMe\n\n  if (Array.isArray(mask) || mask === Array) return IMask.MaskedDynamic; // $FlowFixMe\n\n  if (IMask.Masked && mask.prototype instanceof IMask.Masked) return mask; // $FlowFixMe\n\n  if (mask instanceof Function) return IMask.MaskedFunction; // $FlowFixMe\n\n  if (mask instanceof IMask.Masked) return mask.constructor;\n  console.warn('Mask not found for mask', mask); // eslint-disable-line no-console\n  // $FlowFixMe\n\n  return IMask.Masked;\n}\n/** Creates new {@link Masked} depending on mask type */\n\nfunction createMask(opts) {\n  // $FlowFixMe\n  if (IMask.Masked && opts instanceof IMask.Masked) return opts;\n  opts = Object.assign({}, opts);\n  var mask = opts.mask; // $FlowFixMe\n\n  if (IMask.Masked && mask instanceof IMask.Masked) return mask;\n  var MaskedClass = maskedClass(mask);\n  if (!MaskedClass) throw new Error('Masked class is not found for provided mask, appropriate module needs to be import manually before creating mask.');\n  return new MaskedClass(opts);\n}\nIMask.createMask = createMask;\n\nexport { createMask as default, maskedClass };\n","import { d as _inherits, e as _createSuper, a as _classCallCheck, _ as _createClass, g as _get, h as _getPrototypeOf } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/continuous-tail-details.js';\nimport '../core/utils.js';\n\n/** Masking by custom Function */\n\nvar MaskedFunction = /*#__PURE__*/function (_Masked) {\n  _inherits(MaskedFunction, _Masked);\n\n  var _super = _createSuper(MaskedFunction);\n\n  function MaskedFunction() {\n    _classCallCheck(this, MaskedFunction);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(MaskedFunction, [{\n    key: \"_update\",\n    value:\n    /**\n      @override\n      @param {Object} opts\n    */\n    function _update(opts) {\n      if (opts.mask) opts.validate = opts.mask;\n\n      _get(_getPrototypeOf(MaskedFunction.prototype), \"_update\", this).call(this, opts);\n    }\n  }]);\n\n  return MaskedFunction;\n}(Masked);\nIMask.MaskedFunction = MaskedFunction;\n\nexport { MaskedFunction as default };\n","import { d as _inherits, e as _createSuper, a as _classCallCheck, _ as _createClass, g as _get, h as _getPrototypeOf, f as _slicedToArray, i as _set } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport { escapeRegExp, DIRECTION } from '../core/utils.js';\nimport ChangeDetails from '../core/change-details.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/continuous-tail-details.js';\n\n/**\n  Number mask\n  @param {Object} opts\n  @param {string} opts.radix - Single char\n  @param {string} opts.thousandsSeparator - Single char\n  @param {Array<string>} opts.mapToRadix - Array of single chars\n  @param {number} opts.min\n  @param {number} opts.max\n  @param {number} opts.scale - Digits after point\n  @param {boolean} opts.signed - Allow negative\n  @param {boolean} opts.normalizeZeros - Flag to remove leading and trailing zeros in the end of editing\n  @param {boolean} opts.padFractionalZeros - Flag to pad trailing zeros after point in the end of editing\n*/\nvar MaskedNumber = /*#__PURE__*/function (_Masked) {\n  _inherits(MaskedNumber, _Masked);\n\n  var _super = _createSuper(MaskedNumber);\n\n  /** Single char */\n\n  /** Single char */\n\n  /** Array of single chars */\n\n  /** */\n\n  /** */\n\n  /** Digits after point */\n\n  /** */\n\n  /** Flag to remove leading and trailing zeros in the end of editing */\n\n  /** Flag to pad trailing zeros after point in the end of editing */\n  function MaskedNumber(opts) {\n    _classCallCheck(this, MaskedNumber);\n\n    return _super.call(this, Object.assign({}, MaskedNumber.DEFAULTS, opts));\n  }\n  /**\n    @override\n  */\n\n\n  _createClass(MaskedNumber, [{\n    key: \"_update\",\n    value: function _update(opts) {\n      _get(_getPrototypeOf(MaskedNumber.prototype), \"_update\", this).call(this, opts);\n\n      this._updateRegExps();\n    }\n    /** */\n\n  }, {\n    key: \"_updateRegExps\",\n    value: function _updateRegExps() {\n      // use different regexp to process user input (more strict, input suffix) and tail shifting\n      var start = '^' + (this.allowNegative ? '[+|\\\\-]?' : '');\n      var midInput = '(0|([1-9]+\\\\d*))?';\n      var mid = '\\\\d*';\n      var end = (this.scale ? '(' + escapeRegExp(this.radix) + '\\\\d{0,' + this.scale + '})?' : '') + '$';\n      this._numberRegExpInput = new RegExp(start + midInput + end);\n      this._numberRegExp = new RegExp(start + mid + end);\n      this._mapToRadixRegExp = new RegExp('[' + this.mapToRadix.map(escapeRegExp).join('') + ']', 'g');\n      this._thousandsSeparatorRegExp = new RegExp(escapeRegExp(this.thousandsSeparator), 'g');\n    }\n    /** */\n\n  }, {\n    key: \"_removeThousandsSeparators\",\n    value: function _removeThousandsSeparators(value) {\n      return value.replace(this._thousandsSeparatorRegExp, '');\n    }\n    /** */\n\n  }, {\n    key: \"_insertThousandsSeparators\",\n    value: function _insertThousandsSeparators(value) {\n      // https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript\n      var parts = value.split(this.radix);\n      parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, this.thousandsSeparator);\n      return parts.join(this.radix);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"doPrepare\",\n    value: function doPrepare(str) {\n      var _get2;\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return (_get2 = _get(_getPrototypeOf(MaskedNumber.prototype), \"doPrepare\", this)).call.apply(_get2, [this, this._removeThousandsSeparators(str.replace(this._mapToRadixRegExp, this.radix))].concat(args));\n    }\n    /** */\n\n  }, {\n    key: \"_separatorsCount\",\n    value: function _separatorsCount(to) {\n      var extendOnSeparators = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var count = 0;\n\n      for (var pos = 0; pos < to; ++pos) {\n        if (this._value.indexOf(this.thousandsSeparator, pos) === pos) {\n          ++count;\n          if (extendOnSeparators) to += this.thousandsSeparator.length;\n        }\n      }\n\n      return count;\n    }\n    /** */\n\n  }, {\n    key: \"_separatorsCountFromSlice\",\n    value: function _separatorsCountFromSlice() {\n      var slice = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._value;\n      return this._separatorsCount(this._removeThousandsSeparators(slice).length, true);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"extractInput\",\n    value: function extractInput() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      var flags = arguments.length > 2 ? arguments[2] : undefined;\n\n      var _this$_adjustRangeWit = this._adjustRangeWithSeparators(fromPos, toPos);\n\n      var _this$_adjustRangeWit2 = _slicedToArray(_this$_adjustRangeWit, 2);\n\n      fromPos = _this$_adjustRangeWit2[0];\n      toPos = _this$_adjustRangeWit2[1];\n      return this._removeThousandsSeparators(_get(_getPrototypeOf(MaskedNumber.prototype), \"extractInput\", this).call(this, fromPos, toPos, flags));\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"_appendCharRaw\",\n    value: function _appendCharRaw(ch) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (!this.thousandsSeparator) return _get(_getPrototypeOf(MaskedNumber.prototype), \"_appendCharRaw\", this).call(this, ch, flags);\n      var prevBeforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n\n      var prevBeforeTailSeparatorsCount = this._separatorsCountFromSlice(prevBeforeTailValue);\n\n      this._value = this._removeThousandsSeparators(this.value);\n\n      var appendDetails = _get(_getPrototypeOf(MaskedNumber.prototype), \"_appendCharRaw\", this).call(this, ch, flags);\n\n      this._value = this._insertThousandsSeparators(this._value);\n      var beforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n\n      var beforeTailSeparatorsCount = this._separatorsCountFromSlice(beforeTailValue);\n\n      appendDetails.tailShift += (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length;\n      appendDetails.skip = !appendDetails.rawInserted && ch === this.thousandsSeparator;\n      return appendDetails;\n    }\n    /** */\n\n  }, {\n    key: \"_findSeparatorAround\",\n    value: function _findSeparatorAround(pos) {\n      if (this.thousandsSeparator) {\n        var searchFrom = pos - this.thousandsSeparator.length + 1;\n        var separatorPos = this.value.indexOf(this.thousandsSeparator, searchFrom);\n        if (separatorPos <= pos) return separatorPos;\n      }\n\n      return -1;\n    }\n  }, {\n    key: \"_adjustRangeWithSeparators\",\n    value: function _adjustRangeWithSeparators(from, to) {\n      var separatorAroundFromPos = this._findSeparatorAround(from);\n\n      if (separatorAroundFromPos >= 0) from = separatorAroundFromPos;\n\n      var separatorAroundToPos = this._findSeparatorAround(to);\n\n      if (separatorAroundToPos >= 0) to = separatorAroundToPos + this.thousandsSeparator.length;\n      return [from, to];\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n\n      var _this$_adjustRangeWit3 = this._adjustRangeWithSeparators(fromPos, toPos);\n\n      var _this$_adjustRangeWit4 = _slicedToArray(_this$_adjustRangeWit3, 2);\n\n      fromPos = _this$_adjustRangeWit4[0];\n      toPos = _this$_adjustRangeWit4[1];\n      var valueBeforePos = this.value.slice(0, fromPos);\n      var valueAfterPos = this.value.slice(toPos);\n\n      var prevBeforeTailSeparatorsCount = this._separatorsCount(valueBeforePos.length);\n\n      this._value = this._insertThousandsSeparators(this._removeThousandsSeparators(valueBeforePos + valueAfterPos));\n\n      var beforeTailSeparatorsCount = this._separatorsCountFromSlice(valueBeforePos);\n\n      return new ChangeDetails({\n        tailShift: (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length\n      });\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"nearestInputPos\",\n    value: function nearestInputPos(cursorPos, direction) {\n      if (!this.thousandsSeparator) return cursorPos;\n\n      switch (direction) {\n        case DIRECTION.NONE:\n        case DIRECTION.LEFT:\n        case DIRECTION.FORCE_LEFT:\n          {\n            var separatorAtLeftPos = this._findSeparatorAround(cursorPos - 1);\n\n            if (separatorAtLeftPos >= 0) {\n              var separatorAtLeftEndPos = separatorAtLeftPos + this.thousandsSeparator.length;\n\n              if (cursorPos < separatorAtLeftEndPos || this.value.length <= separatorAtLeftEndPos || direction === DIRECTION.FORCE_LEFT) {\n                return separatorAtLeftPos;\n              }\n            }\n\n            break;\n          }\n\n        case DIRECTION.RIGHT:\n        case DIRECTION.FORCE_RIGHT:\n          {\n            var separatorAtRightPos = this._findSeparatorAround(cursorPos);\n\n            if (separatorAtRightPos >= 0) {\n              return separatorAtRightPos + this.thousandsSeparator.length;\n            }\n          }\n      }\n\n      return cursorPos;\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"doValidate\",\n    value: function doValidate(flags) {\n      var regexp = flags.input ? this._numberRegExpInput : this._numberRegExp; // validate as string\n\n      var valid = regexp.test(this._removeThousandsSeparators(this.value));\n\n      if (valid) {\n        // validate as number\n        var number = this.number;\n        valid = valid && !isNaN(number) && (this.min == null || this.min >= 0 || this.min <= this.number) && (this.max == null || this.max <= 0 || this.number <= this.max);\n      }\n\n      return valid && _get(_getPrototypeOf(MaskedNumber.prototype), \"doValidate\", this).call(this, flags);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"doCommit\",\n    value: function doCommit() {\n      if (this.value) {\n        var number = this.number;\n        var validnum = number; // check bounds\n\n        if (this.min != null) validnum = Math.max(validnum, this.min);\n        if (this.max != null) validnum = Math.min(validnum, this.max);\n        if (validnum !== number) this.unmaskedValue = String(validnum);\n        var formatted = this.value;\n        if (this.normalizeZeros) formatted = this._normalizeZeros(formatted);\n        if (this.padFractionalZeros) formatted = this._padFractionalZeros(formatted);\n        this._value = formatted;\n      }\n\n      _get(_getPrototypeOf(MaskedNumber.prototype), \"doCommit\", this).call(this);\n    }\n    /** */\n\n  }, {\n    key: \"_normalizeZeros\",\n    value: function _normalizeZeros(value) {\n      var parts = this._removeThousandsSeparators(value).split(this.radix); // remove leading zeros\n\n\n      parts[0] = parts[0].replace(/^(\\D*)(0*)(\\d*)/, function (match, sign, zeros, num) {\n        return sign + num;\n      }); // add leading zero\n\n      if (value.length && !/\\d$/.test(parts[0])) parts[0] = parts[0] + '0';\n\n      if (parts.length > 1) {\n        parts[1] = parts[1].replace(/0*$/, ''); // remove trailing zeros\n\n        if (!parts[1].length) parts.length = 1; // remove fractional\n      }\n\n      return this._insertThousandsSeparators(parts.join(this.radix));\n    }\n    /** */\n\n  }, {\n    key: \"_padFractionalZeros\",\n    value: function _padFractionalZeros(value) {\n      if (!value) return value;\n      var parts = value.split(this.radix);\n      if (parts.length < 2) parts.push('');\n      parts[1] = parts[1].padEnd(this.scale, '0');\n      return parts.join(this.radix);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"unmaskedValue\",\n    get: function get() {\n      return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix, '.');\n    },\n    set: function set(unmaskedValue) {\n      _set(_getPrototypeOf(MaskedNumber.prototype), \"unmaskedValue\", unmaskedValue.replace('.', this.radix), this, true);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"typedValue\",\n    get: function get() {\n      return Number(this.unmaskedValue);\n    },\n    set: function set(n) {\n      _set(_getPrototypeOf(MaskedNumber.prototype), \"unmaskedValue\", String(n), this, true);\n    }\n    /** Parsed Number */\n\n  }, {\n    key: \"number\",\n    get: function get() {\n      return this.typedValue;\n    },\n    set: function set(number) {\n      this.typedValue = number;\n    }\n    /**\n      Is negative allowed\n      @readonly\n    */\n\n  }, {\n    key: \"allowNegative\",\n    get: function get() {\n      return this.signed || this.min != null && this.min < 0 || this.max != null && this.max < 0;\n    }\n  }]);\n\n  return MaskedNumber;\n}(Masked);\nMaskedNumber.DEFAULTS = {\n  radix: ',',\n  thousandsSeparator: '',\n  mapToRadix: ['.'],\n  scale: 2,\n  signed: false,\n  normalizeZeros: true,\n  padFractionalZeros: false\n};\nIMask.MaskedNumber = MaskedNumber;\n\nexport { MaskedNumber as default };\n","import { d as _inherits, e as _createSuper, a as _classCallCheck, _ as _createClass, g as _get, h as _getPrototypeOf, b as _objectWithoutProperties, i as _set } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport { DIRECTION, forceDirection } from '../core/utils.js';\nimport ChangeDetails from '../core/change-details.js';\nimport Masked from './base.js';\nimport PatternInputDefinition, { DEFAULT_INPUT_DEFINITIONS } from './pattern/input-definition.js';\nimport PatternFixedDefinition from './pattern/fixed-definition.js';\nimport ChunksTailDetails from './pattern/chunk-tail-details.js';\nimport createMask from './factory.js';\nimport IMask from '../core/holder.js';\nimport './regexp.js';\nimport '../core/continuous-tail-details.js';\n\nvar _excluded = [\"_blocks\"];\n\n/**\n  Pattern mask\n  @param {Object} opts\n  @param {Object} opts.blocks\n  @param {Object} opts.definitions\n  @param {string} opts.placeholderChar\n  @param {boolean} opts.lazy\n*/\nvar MaskedPattern = /*#__PURE__*/function (_Masked) {\n  _inherits(MaskedPattern, _Masked);\n\n  var _super = _createSuper(MaskedPattern);\n\n  /** */\n\n  /** */\n\n  /** Single char for empty input */\n\n  /** Show placeholder only when needed */\n  function MaskedPattern() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, MaskedPattern);\n\n    // TODO type $Shape<MaskedPatternOptions>={} does not work\n    opts.definitions = Object.assign({}, DEFAULT_INPUT_DEFINITIONS, opts.definitions);\n    return _super.call(this, Object.assign({}, MaskedPattern.DEFAULTS, opts));\n  }\n  /**\n    @override\n    @param {Object} opts\n  */\n\n\n  _createClass(MaskedPattern, [{\n    key: \"_update\",\n    value: function _update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      opts.definitions = Object.assign({}, this.definitions, opts.definitions);\n\n      _get(_getPrototypeOf(MaskedPattern.prototype), \"_update\", this).call(this, opts);\n\n      this._rebuildMask();\n    }\n    /** */\n\n  }, {\n    key: \"_rebuildMask\",\n    value: function _rebuildMask() {\n      var _this = this;\n\n      var defs = this.definitions;\n      this._blocks = [];\n      this._stops = [];\n      this._maskedBlocks = {};\n      var pattern = this.mask;\n      if (!pattern || !defs) return;\n      var unmaskingBlock = false;\n      var optionalBlock = false;\n\n      for (var i = 0; i < pattern.length; ++i) {\n        if (this.blocks) {\n          var _ret = function () {\n            var p = pattern.slice(i);\n            var bNames = Object.keys(_this.blocks).filter(function (bName) {\n              return p.indexOf(bName) === 0;\n            }); // order by key length\n\n            bNames.sort(function (a, b) {\n              return b.length - a.length;\n            }); // use block name with max length\n\n            var bName = bNames[0];\n\n            if (bName) {\n              // $FlowFixMe no ideas\n              var maskedBlock = createMask(Object.assign({\n                parent: _this,\n                lazy: _this.lazy,\n                placeholderChar: _this.placeholderChar,\n                overwrite: _this.overwrite\n              }, _this.blocks[bName]));\n\n              if (maskedBlock) {\n                _this._blocks.push(maskedBlock); // store block index\n\n\n                if (!_this._maskedBlocks[bName]) _this._maskedBlocks[bName] = [];\n\n                _this._maskedBlocks[bName].push(_this._blocks.length - 1);\n              }\n\n              i += bName.length - 1;\n              return \"continue\";\n            }\n          }();\n\n          if (_ret === \"continue\") continue;\n        }\n\n        var char = pattern[i];\n\n        var _isInput = (char in defs);\n\n        if (char === MaskedPattern.STOP_CHAR) {\n          this._stops.push(this._blocks.length);\n\n          continue;\n        }\n\n        if (char === '{' || char === '}') {\n          unmaskingBlock = !unmaskingBlock;\n          continue;\n        }\n\n        if (char === '[' || char === ']') {\n          optionalBlock = !optionalBlock;\n          continue;\n        }\n\n        if (char === MaskedPattern.ESCAPE_CHAR) {\n          ++i;\n          char = pattern[i];\n          if (!char) break;\n          _isInput = false;\n        }\n\n        var def = _isInput ? new PatternInputDefinition({\n          parent: this,\n          lazy: this.lazy,\n          placeholderChar: this.placeholderChar,\n          mask: defs[char],\n          isOptional: optionalBlock\n        }) : new PatternFixedDefinition({\n          char: char,\n          isUnmasking: unmaskingBlock\n        });\n\n        this._blocks.push(def);\n      }\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"state\",\n    get: function get() {\n      return Object.assign({}, _get(_getPrototypeOf(MaskedPattern.prototype), \"state\", this), {\n        _blocks: this._blocks.map(function (b) {\n          return b.state;\n        })\n      });\n    },\n    set: function set(state) {\n      var _blocks = state._blocks,\n          maskedState = _objectWithoutProperties(state, _excluded);\n\n      this._blocks.forEach(function (b, bi) {\n        return b.state = _blocks[bi];\n      });\n\n      _set(_getPrototypeOf(MaskedPattern.prototype), \"state\", maskedState, this, true);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      _get(_getPrototypeOf(MaskedPattern.prototype), \"reset\", this).call(this);\n\n      this._blocks.forEach(function (b) {\n        return b.reset();\n      });\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"isComplete\",\n    get: function get() {\n      return this._blocks.every(function (b) {\n        return b.isComplete;\n      });\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"doCommit\",\n    value: function doCommit() {\n      this._blocks.forEach(function (b) {\n        return b.doCommit();\n      });\n\n      _get(_getPrototypeOf(MaskedPattern.prototype), \"doCommit\", this).call(this);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"unmaskedValue\",\n    get: function get() {\n      return this._blocks.reduce(function (str, b) {\n        return str += b.unmaskedValue;\n      }, '');\n    },\n    set: function set(unmaskedValue) {\n      _set(_getPrototypeOf(MaskedPattern.prototype), \"unmaskedValue\", unmaskedValue, this, true);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"value\",\n    get: function get() {\n      // TODO return _value when not in change?\n      return this._blocks.reduce(function (str, b) {\n        return str += b.value;\n      }, '');\n    },\n    set: function set(value) {\n      _set(_getPrototypeOf(MaskedPattern.prototype), \"value\", value, this, true);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"appendTail\",\n    value: function appendTail(tail) {\n      return _get(_getPrototypeOf(MaskedPattern.prototype), \"appendTail\", this).call(this, tail).aggregate(this._appendPlaceholder());\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"_appendCharRaw\",\n    value: function _appendCharRaw(ch) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var blockIter = this._mapPosToBlock(this.value.length);\n\n      var details = new ChangeDetails();\n      if (!blockIter) return details;\n\n      for (var bi = blockIter.index;; ++bi) {\n        var _block = this._blocks[bi];\n        if (!_block) break;\n\n        var blockDetails = _block._appendChar(ch, flags);\n\n        var skip = blockDetails.skip;\n        details.aggregate(blockDetails);\n        if (skip || blockDetails.rawInserted) break; // go next char\n      }\n\n      return details;\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"extractTail\",\n    value: function extractTail() {\n      var _this2 = this;\n\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      var chunkTail = new ChunksTailDetails();\n      if (fromPos === toPos) return chunkTail;\n\n      this._forEachBlocksInRange(fromPos, toPos, function (b, bi, bFromPos, bToPos) {\n        var blockChunk = b.extractTail(bFromPos, bToPos);\n        blockChunk.stop = _this2._findStopBefore(bi);\n        blockChunk.from = _this2._blockStartPos(bi);\n        if (blockChunk instanceof ChunksTailDetails) blockChunk.blockIndex = bi;\n        chunkTail.extend(blockChunk);\n      });\n\n      return chunkTail;\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"extractInput\",\n    value: function extractInput() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (fromPos === toPos) return '';\n      var input = '';\n\n      this._forEachBlocksInRange(fromPos, toPos, function (b, _, fromPos, toPos) {\n        input += b.extractInput(fromPos, toPos, flags);\n      });\n\n      return input;\n    }\n  }, {\n    key: \"_findStopBefore\",\n    value: function _findStopBefore(blockIndex) {\n      var stopBefore;\n\n      for (var si = 0; si < this._stops.length; ++si) {\n        var stop = this._stops[si];\n        if (stop <= blockIndex) stopBefore = stop;else break;\n      }\n\n      return stopBefore;\n    }\n    /** Appends placeholder depending on laziness */\n\n  }, {\n    key: \"_appendPlaceholder\",\n    value: function _appendPlaceholder(toBlockIndex) {\n      var _this3 = this;\n\n      var details = new ChangeDetails();\n      if (this.lazy && toBlockIndex == null) return details;\n\n      var startBlockIter = this._mapPosToBlock(this.value.length);\n\n      if (!startBlockIter) return details;\n      var startBlockIndex = startBlockIter.index;\n      var endBlockIndex = toBlockIndex != null ? toBlockIndex : this._blocks.length;\n\n      this._blocks.slice(startBlockIndex, endBlockIndex).forEach(function (b) {\n        if (!b.lazy || toBlockIndex != null) {\n          // $FlowFixMe `_blocks` may not be present\n          var args = b._blocks != null ? [b._blocks.length] : [];\n\n          var bDetails = b._appendPlaceholder.apply(b, args);\n\n          _this3._value += bDetails.inserted;\n          details.aggregate(bDetails);\n        }\n      });\n\n      return details;\n    }\n    /** Finds block in pos */\n\n  }, {\n    key: \"_mapPosToBlock\",\n    value: function _mapPosToBlock(pos) {\n      var accVal = '';\n\n      for (var bi = 0; bi < this._blocks.length; ++bi) {\n        var _block2 = this._blocks[bi];\n        var blockStartPos = accVal.length;\n        accVal += _block2.value;\n\n        if (pos <= accVal.length) {\n          return {\n            index: bi,\n            offset: pos - blockStartPos\n          };\n        }\n      }\n    }\n    /** */\n\n  }, {\n    key: \"_blockStartPos\",\n    value: function _blockStartPos(blockIndex) {\n      return this._blocks.slice(0, blockIndex).reduce(function (pos, b) {\n        return pos += b.value.length;\n      }, 0);\n    }\n    /** */\n\n  }, {\n    key: \"_forEachBlocksInRange\",\n    value: function _forEachBlocksInRange(fromPos) {\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      var fn = arguments.length > 2 ? arguments[2] : undefined;\n\n      var fromBlockIter = this._mapPosToBlock(fromPos);\n\n      if (fromBlockIter) {\n        var toBlockIter = this._mapPosToBlock(toPos); // process first block\n\n\n        var isSameBlock = toBlockIter && fromBlockIter.index === toBlockIter.index;\n        var fromBlockStartPos = fromBlockIter.offset;\n        var fromBlockEndPos = toBlockIter && isSameBlock ? toBlockIter.offset : this._blocks[fromBlockIter.index].value.length;\n        fn(this._blocks[fromBlockIter.index], fromBlockIter.index, fromBlockStartPos, fromBlockEndPos);\n\n        if (toBlockIter && !isSameBlock) {\n          // process intermediate blocks\n          for (var bi = fromBlockIter.index + 1; bi < toBlockIter.index; ++bi) {\n            fn(this._blocks[bi], bi, 0, this._blocks[bi].value.length);\n          } // process last block\n\n\n          fn(this._blocks[toBlockIter.index], toBlockIter.index, 0, toBlockIter.offset);\n        }\n      }\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n\n      var removeDetails = _get(_getPrototypeOf(MaskedPattern.prototype), \"remove\", this).call(this, fromPos, toPos);\n\n      this._forEachBlocksInRange(fromPos, toPos, function (b, _, bFromPos, bToPos) {\n        removeDetails.aggregate(b.remove(bFromPos, bToPos));\n      });\n\n      return removeDetails;\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"nearestInputPos\",\n    value: function nearestInputPos(cursorPos) {\n      var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DIRECTION.NONE;\n      // TODO refactor - extract alignblock\n      var beginBlockData = this._mapPosToBlock(cursorPos) || {\n        index: 0,\n        offset: 0\n      };\n      var beginBlockOffset = beginBlockData.offset,\n          beginBlockIndex = beginBlockData.index;\n      var beginBlock = this._blocks[beginBlockIndex];\n      if (!beginBlock) return cursorPos;\n      var beginBlockCursorPos = beginBlockOffset; // if position inside block - try to adjust it\n\n      if (beginBlockCursorPos !== 0 && beginBlockCursorPos < beginBlock.value.length) {\n        beginBlockCursorPos = beginBlock.nearestInputPos(beginBlockOffset, forceDirection(direction));\n      }\n\n      var cursorAtRight = beginBlockCursorPos === beginBlock.value.length;\n      var cursorAtLeft = beginBlockCursorPos === 0; //  cursor is INSIDE first block (not at bounds)\n\n      if (!cursorAtLeft && !cursorAtRight) return this._blockStartPos(beginBlockIndex) + beginBlockCursorPos;\n      var searchBlockIndex = cursorAtRight ? beginBlockIndex + 1 : beginBlockIndex;\n\n      if (direction === DIRECTION.NONE) {\n        // NONE direction used to calculate start input position if no chars were removed\n        // FOR NONE:\n        // -\n        // input|any\n        // ->\n        //  any|input\n        // <-\n        //  filled-input|any\n        // check if first block at left is input\n        if (searchBlockIndex > 0) {\n          var blockIndexAtLeft = searchBlockIndex - 1;\n          var blockAtLeft = this._blocks[blockIndexAtLeft];\n          var blockInputPos = blockAtLeft.nearestInputPos(0, DIRECTION.NONE); // is input\n\n          if (!blockAtLeft.value.length || blockInputPos !== blockAtLeft.value.length) {\n            return this._blockStartPos(searchBlockIndex);\n          }\n        } // ->\n\n\n        var firstInputAtRight = searchBlockIndex;\n\n        for (var bi = firstInputAtRight; bi < this._blocks.length; ++bi) {\n          var blockAtRight = this._blocks[bi];\n\n          var _blockInputPos = blockAtRight.nearestInputPos(0, DIRECTION.NONE);\n\n          if (!blockAtRight.value.length || _blockInputPos !== blockAtRight.value.length) {\n            return this._blockStartPos(bi) + _blockInputPos;\n          }\n        } // <-\n        // find first non-fixed symbol\n\n\n        for (var _bi = searchBlockIndex - 1; _bi >= 0; --_bi) {\n          var _block3 = this._blocks[_bi];\n\n          var _blockInputPos2 = _block3.nearestInputPos(0, DIRECTION.NONE); // is input\n\n\n          if (!_block3.value.length || _blockInputPos2 !== _block3.value.length) {\n            return this._blockStartPos(_bi) + _block3.value.length;\n          }\n        }\n\n        return cursorPos;\n      }\n\n      if (direction === DIRECTION.LEFT || direction === DIRECTION.FORCE_LEFT) {\n        // -\n        //  any|filled-input\n        // <-\n        //  any|first not empty is not-len-aligned\n        //  not-0-aligned|any\n        // ->\n        //  any|not-len-aligned or end\n        // check if first block at right is filled input\n        var firstFilledBlockIndexAtRight;\n\n        for (var _bi2 = searchBlockIndex; _bi2 < this._blocks.length; ++_bi2) {\n          if (this._blocks[_bi2].value) {\n            firstFilledBlockIndexAtRight = _bi2;\n            break;\n          }\n        }\n\n        if (firstFilledBlockIndexAtRight != null) {\n          var filledBlock = this._blocks[firstFilledBlockIndexAtRight];\n\n          var _blockInputPos3 = filledBlock.nearestInputPos(0, DIRECTION.RIGHT);\n\n          if (_blockInputPos3 === 0 && filledBlock.unmaskedValue.length) {\n            // filled block is input\n            return this._blockStartPos(firstFilledBlockIndexAtRight) + _blockInputPos3;\n          }\n        } // <-\n        // find this vars\n\n\n        var firstFilledInputBlockIndex = -1;\n        var firstEmptyInputBlockIndex; // TODO consider nested empty inputs\n\n        for (var _bi3 = searchBlockIndex - 1; _bi3 >= 0; --_bi3) {\n          var _block4 = this._blocks[_bi3];\n\n          var _blockInputPos4 = _block4.nearestInputPos(_block4.value.length, DIRECTION.FORCE_LEFT);\n\n          if (!_block4.value || _blockInputPos4 !== 0) firstEmptyInputBlockIndex = _bi3;\n\n          if (_blockInputPos4 !== 0) {\n            if (_blockInputPos4 !== _block4.value.length) {\n              // aligned inside block - return immediately\n              return this._blockStartPos(_bi3) + _blockInputPos4;\n            } else {\n              // found filled\n              firstFilledInputBlockIndex = _bi3;\n              break;\n            }\n          }\n        }\n\n        if (direction === DIRECTION.LEFT) {\n          // try find first empty input before start searching position only when not forced\n          for (var _bi4 = firstFilledInputBlockIndex + 1; _bi4 <= Math.min(searchBlockIndex, this._blocks.length - 1); ++_bi4) {\n            var _block5 = this._blocks[_bi4];\n\n            var _blockInputPos5 = _block5.nearestInputPos(0, DIRECTION.NONE);\n\n            var blockAlignedPos = this._blockStartPos(_bi4) + _blockInputPos5;\n\n            if (blockAlignedPos > cursorPos) break; // if block is not lazy input\n\n            if (_blockInputPos5 !== _block5.value.length) return blockAlignedPos;\n          }\n        } // process overflow\n\n\n        if (firstFilledInputBlockIndex >= 0) {\n          return this._blockStartPos(firstFilledInputBlockIndex) + this._blocks[firstFilledInputBlockIndex].value.length;\n        } // for lazy if has aligned left inside fixed and has came to the start - use start position\n\n\n        if (direction === DIRECTION.FORCE_LEFT || this.lazy && !this.extractInput() && !isInput(this._blocks[searchBlockIndex])) {\n          return 0;\n        }\n\n        if (firstEmptyInputBlockIndex != null) {\n          return this._blockStartPos(firstEmptyInputBlockIndex);\n        } // find first input\n\n\n        for (var _bi5 = searchBlockIndex; _bi5 < this._blocks.length; ++_bi5) {\n          var _block6 = this._blocks[_bi5];\n\n          var _blockInputPos6 = _block6.nearestInputPos(0, DIRECTION.NONE); // is input\n\n\n          if (!_block6.value.length || _blockInputPos6 !== _block6.value.length) {\n            return this._blockStartPos(_bi5) + _blockInputPos6;\n          }\n        }\n\n        return 0;\n      }\n\n      if (direction === DIRECTION.RIGHT || direction === DIRECTION.FORCE_RIGHT) {\n        // ->\n        //  any|not-len-aligned and filled\n        //  any|not-len-aligned\n        // <-\n        //  not-0-aligned or start|any\n        var firstInputBlockAlignedIndex;\n        var firstInputBlockAlignedPos;\n\n        for (var _bi6 = searchBlockIndex; _bi6 < this._blocks.length; ++_bi6) {\n          var _block7 = this._blocks[_bi6];\n\n          var _blockInputPos7 = _block7.nearestInputPos(0, DIRECTION.NONE);\n\n          if (_blockInputPos7 !== _block7.value.length) {\n            firstInputBlockAlignedPos = this._blockStartPos(_bi6) + _blockInputPos7;\n            firstInputBlockAlignedIndex = _bi6;\n            break;\n          }\n        }\n\n        if (firstInputBlockAlignedIndex != null && firstInputBlockAlignedPos != null) {\n          for (var _bi7 = firstInputBlockAlignedIndex; _bi7 < this._blocks.length; ++_bi7) {\n            var _block8 = this._blocks[_bi7];\n\n            var _blockInputPos8 = _block8.nearestInputPos(0, DIRECTION.FORCE_RIGHT);\n\n            if (_blockInputPos8 !== _block8.value.length) {\n              return this._blockStartPos(_bi7) + _blockInputPos8;\n            }\n          }\n\n          return direction === DIRECTION.FORCE_RIGHT ? this.value.length : firstInputBlockAlignedPos;\n        }\n\n        for (var _bi8 = Math.min(searchBlockIndex, this._blocks.length - 1); _bi8 >= 0; --_bi8) {\n          var _block9 = this._blocks[_bi8];\n\n          var _blockInputPos9 = _block9.nearestInputPos(_block9.value.length, DIRECTION.LEFT);\n\n          if (_blockInputPos9 !== 0) {\n            var alignedPos = this._blockStartPos(_bi8) + _blockInputPos9;\n\n            if (alignedPos >= cursorPos) return alignedPos;\n            break;\n          }\n        }\n      }\n\n      return cursorPos;\n    }\n    /** Get block by name */\n\n  }, {\n    key: \"maskedBlock\",\n    value: function maskedBlock(name) {\n      return this.maskedBlocks(name)[0];\n    }\n    /** Get all blocks by name */\n\n  }, {\n    key: \"maskedBlocks\",\n    value: function maskedBlocks(name) {\n      var _this4 = this;\n\n      var indices = this._maskedBlocks[name];\n      if (!indices) return [];\n      return indices.map(function (gi) {\n        return _this4._blocks[gi];\n      });\n    }\n  }]);\n\n  return MaskedPattern;\n}(Masked);\nMaskedPattern.DEFAULTS = {\n  lazy: true,\n  placeholderChar: '_'\n};\nMaskedPattern.STOP_CHAR = '`';\nMaskedPattern.ESCAPE_CHAR = '\\\\';\nMaskedPattern.InputDefinition = PatternInputDefinition;\nMaskedPattern.FixedDefinition = PatternFixedDefinition;\n\nfunction isInput(block) {\n  if (!block) return false;\n  var value = block.value;\n  return !value || block.nearestInputPos(0, DIRECTION.NONE) !== value.length;\n}\n\nIMask.MaskedPattern = MaskedPattern;\n\nexport { MaskedPattern as default };\n","import { _ as _createClass, a as _classCallCheck, b as _objectWithoutProperties } from '../../_rollupPluginBabelHelpers-a0b34764.js';\nimport ChangeDetails from '../../core/change-details.js';\nimport { isString } from '../../core/utils.js';\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\nimport IMask from '../../core/holder.js';\n\nvar _excluded = [\"chunks\"];\n\nvar ChunksTailDetails = /*#__PURE__*/function () {\n  /** */\n  function ChunksTailDetails() {\n    var chunks = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var from = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    _classCallCheck(this, ChunksTailDetails);\n\n    this.chunks = chunks;\n    this.from = from;\n  }\n\n  _createClass(ChunksTailDetails, [{\n    key: \"toString\",\n    value: function toString() {\n      return this.chunks.map(String).join('');\n    } // $FlowFixMe no ideas\n\n  }, {\n    key: \"extend\",\n    value: function extend(tailChunk) {\n      if (!String(tailChunk)) return;\n      if (isString(tailChunk)) tailChunk = new ContinuousTailDetails(String(tailChunk));\n      var lastChunk = this.chunks[this.chunks.length - 1];\n      var extendLast = lastChunk && (lastChunk.stop === tailChunk.stop || tailChunk.stop == null) && // if tail chunk goes just after last chunk\n      tailChunk.from === lastChunk.from + lastChunk.toString().length;\n\n      if (tailChunk instanceof ContinuousTailDetails) {\n        // check the ability to extend previous chunk\n        if (extendLast) {\n          // extend previous chunk\n          lastChunk.extend(tailChunk.toString());\n        } else {\n          // append new chunk\n          this.chunks.push(tailChunk);\n        }\n      } else if (tailChunk instanceof ChunksTailDetails) {\n        if (tailChunk.stop == null) {\n          // unwrap floating chunks to parent, keeping `from` pos\n          var firstTailChunk;\n\n          while (tailChunk.chunks.length && tailChunk.chunks[0].stop == null) {\n            firstTailChunk = tailChunk.chunks.shift();\n            firstTailChunk.from += tailChunk.from;\n            this.extend(firstTailChunk);\n          }\n        } // if tail chunk still has value\n\n\n        if (tailChunk.toString()) {\n          // if chunks contains stops, then popup stop to container\n          tailChunk.stop = tailChunk.blockIndex;\n          this.chunks.push(tailChunk);\n        }\n      }\n    }\n  }, {\n    key: \"appendTo\",\n    value: function appendTo(masked) {\n      // $FlowFixMe\n      if (!(masked instanceof IMask.MaskedPattern)) {\n        var tail = new ContinuousTailDetails(this.toString());\n        return tail.appendTo(masked);\n      }\n\n      var details = new ChangeDetails();\n\n      for (var ci = 0; ci < this.chunks.length && !details.skip; ++ci) {\n        var chunk = this.chunks[ci];\n\n        var lastBlockIter = masked._mapPosToBlock(masked.value.length);\n\n        var stop = chunk.stop;\n        var chunkBlock = void 0;\n\n        if (stop != null && (!lastBlockIter || lastBlockIter.index <= stop)) {\n          if (chunk instanceof ChunksTailDetails || // for continuous block also check if stop is exist\n          masked._stops.indexOf(stop) >= 0) {\n            details.aggregate(masked._appendPlaceholder(stop));\n          }\n\n          chunkBlock = chunk instanceof ChunksTailDetails && masked._blocks[stop];\n        }\n\n        if (chunkBlock) {\n          var tailDetails = chunkBlock.appendTail(chunk);\n          tailDetails.skip = false; // always ignore skip, it will be set on last\n\n          details.aggregate(tailDetails);\n          masked._value += tailDetails.inserted; // get not inserted chars\n\n          var remainChars = chunk.toString().slice(tailDetails.rawInserted.length);\n          if (remainChars) details.aggregate(masked.append(remainChars, {\n            tail: true\n          }));\n        } else {\n          details.aggregate(masked.append(chunk.toString(), {\n            tail: true\n          }));\n        }\n      }\n      return details;\n    }\n  }, {\n    key: \"state\",\n    get: function get() {\n      return {\n        chunks: this.chunks.map(function (c) {\n          return c.state;\n        }),\n        from: this.from,\n        stop: this.stop,\n        blockIndex: this.blockIndex\n      };\n    },\n    set: function set(state) {\n      var chunks = state.chunks,\n          props = _objectWithoutProperties(state, _excluded);\n\n      Object.assign(this, props);\n      this.chunks = chunks.map(function (cstate) {\n        var chunk = \"chunks\" in cstate ? new ChunksTailDetails() : new ContinuousTailDetails(); // $FlowFixMe already checked above\n\n        chunk.state = cstate;\n        return chunk;\n      });\n    }\n  }, {\n    key: \"shiftBefore\",\n    value: function shiftBefore(pos) {\n      if (this.from >= pos || !this.chunks.length) return '';\n      var chunkShiftPos = pos - this.from;\n      var ci = 0;\n\n      while (ci < this.chunks.length) {\n        var chunk = this.chunks[ci];\n        var shiftChar = chunk.shiftBefore(chunkShiftPos);\n\n        if (chunk.toString()) {\n          // chunk still contains value\n          // but not shifted - means no more available chars to shift\n          if (!shiftChar) break;\n          ++ci;\n        } else {\n          // clean if chunk has no value\n          this.chunks.splice(ci, 1);\n        }\n\n        if (shiftChar) return shiftChar;\n      }\n\n      return '';\n    }\n  }]);\n\n  return ChunksTailDetails;\n}();\n\nexport { ChunksTailDetails as default };\n","import { _ as _createClass, a as _classCallCheck } from '../../_rollupPluginBabelHelpers-a0b34764.js';\nimport ChangeDetails from '../../core/change-details.js';\nimport { DIRECTION, isString } from '../../core/utils.js';\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\n\nvar PatternFixedDefinition = /*#__PURE__*/function () {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n  function PatternFixedDefinition(opts) {\n    _classCallCheck(this, PatternFixedDefinition);\n\n    Object.assign(this, opts);\n    this._value = '';\n  }\n\n  _createClass(PatternFixedDefinition, [{\n    key: \"value\",\n    get: function get() {\n      return this._value;\n    }\n  }, {\n    key: \"unmaskedValue\",\n    get: function get() {\n      return this.isUnmasking ? this.value : '';\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._isRawInput = false;\n      this._value = '';\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._value.length;\n      this._value = this._value.slice(0, fromPos) + this._value.slice(toPos);\n      if (!this._value) this._isRawInput = false;\n      return new ChangeDetails();\n    }\n  }, {\n    key: \"nearestInputPos\",\n    value: function nearestInputPos(cursorPos) {\n      var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DIRECTION.NONE;\n      var minPos = 0;\n      var maxPos = this._value.length;\n\n      switch (direction) {\n        case DIRECTION.LEFT:\n        case DIRECTION.FORCE_LEFT:\n          return minPos;\n\n        case DIRECTION.NONE:\n        case DIRECTION.RIGHT:\n        case DIRECTION.FORCE_RIGHT:\n        default:\n          return maxPos;\n      }\n    }\n  }, {\n    key: \"extractInput\",\n    value: function extractInput() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._value.length;\n      var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return flags.raw && this._isRawInput && this._value.slice(fromPos, toPos) || '';\n    }\n  }, {\n    key: \"isComplete\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"_appendChar\",\n    value: function _appendChar(str) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var details = new ChangeDetails();\n      if (this._value) return details;\n      var appended = this.char === str[0];\n      var isResolved = appended && (this.isUnmasking || flags.input || flags.raw) && !flags.tail;\n      if (isResolved) details.rawInserted = this.char;\n      this._value = details.inserted = this.char;\n      this._isRawInput = isResolved && (flags.raw || flags.input);\n      return details;\n    }\n  }, {\n    key: \"_appendPlaceholder\",\n    value: function _appendPlaceholder() {\n      var details = new ChangeDetails();\n      if (this._value) return details;\n      this._value = details.inserted = this.char;\n      return details;\n    }\n  }, {\n    key: \"extractTail\",\n    value: function extractTail() {\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      return new ContinuousTailDetails('');\n    } // $FlowFixMe no ideas\n\n  }, {\n    key: \"appendTail\",\n    value: function appendTail(tail) {\n      if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n      return tail.appendTo(this);\n    }\n  }, {\n    key: \"append\",\n    value: function append(str, flags, tail) {\n      var details = this._appendChar(str, flags);\n\n      if (tail != null) {\n        details.tailShift += this.appendTail(tail).tailShift;\n      }\n\n      return details;\n    }\n  }, {\n    key: \"doCommit\",\n    value: function doCommit() {}\n  }, {\n    key: \"state\",\n    get: function get() {\n      return {\n        _value: this._value,\n        _isRawInput: this._isRawInput\n      };\n    },\n    set: function set(state) {\n      Object.assign(this, state);\n    }\n  }]);\n\n  return PatternFixedDefinition;\n}();\n\nexport { PatternFixedDefinition as default };\n","import { _ as _createClass, a as _classCallCheck, b as _objectWithoutProperties } from '../../_rollupPluginBabelHelpers-a0b34764.js';\nimport createMask from '../factory.js';\nimport ChangeDetails from '../../core/change-details.js';\nimport { DIRECTION } from '../../core/utils.js';\nimport '../../core/holder.js';\n\nvar _excluded = [\"mask\"];\nvar DEFAULT_INPUT_DEFINITIONS = {\n  '0': /\\d/,\n  'a': /[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\n  // http://stackoverflow.com/a/22075070\n  '*': /./\n};\n/** */\n\nvar PatternInputDefinition = /*#__PURE__*/function () {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n  function PatternInputDefinition(opts) {\n    _classCallCheck(this, PatternInputDefinition);\n\n    var mask = opts.mask,\n        blockOpts = _objectWithoutProperties(opts, _excluded);\n\n    this.masked = createMask({\n      mask: mask\n    });\n    Object.assign(this, blockOpts);\n  }\n\n  _createClass(PatternInputDefinition, [{\n    key: \"reset\",\n    value: function reset() {\n      this._isFilled = false;\n      this.masked.reset();\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n\n      if (fromPos === 0 && toPos >= 1) {\n        this._isFilled = false;\n        return this.masked.remove(fromPos, toPos);\n      }\n\n      return new ChangeDetails();\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.masked.value || (this._isFilled && !this.isOptional ? this.placeholderChar : '');\n    }\n  }, {\n    key: \"unmaskedValue\",\n    get: function get() {\n      return this.masked.unmaskedValue;\n    }\n  }, {\n    key: \"isComplete\",\n    get: function get() {\n      return Boolean(this.masked.value) || this.isOptional;\n    }\n  }, {\n    key: \"_appendChar\",\n    value: function _appendChar(str) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (this._isFilled) return new ChangeDetails();\n      var state = this.masked.state; // simulate input\n\n      var details = this.masked._appendChar(str, flags);\n\n      if (details.inserted && this.doValidate(flags) === false) {\n        details.inserted = details.rawInserted = '';\n        this.masked.state = state;\n      }\n\n      if (!details.inserted && !this.isOptional && !this.lazy && !flags.input) {\n        details.inserted = this.placeholderChar;\n      }\n\n      details.skip = !details.inserted && !this.isOptional;\n      this._isFilled = Boolean(details.inserted);\n      return details;\n    }\n  }, {\n    key: \"append\",\n    value: function append() {\n      var _this$masked;\n\n      return (_this$masked = this.masked).append.apply(_this$masked, arguments);\n    }\n  }, {\n    key: \"_appendPlaceholder\",\n    value: function _appendPlaceholder() {\n      var details = new ChangeDetails();\n      if (this._isFilled || this.isOptional) return details;\n      this._isFilled = true;\n      details.inserted = this.placeholderChar;\n      return details;\n    }\n  }, {\n    key: \"extractTail\",\n    value: function extractTail() {\n      var _this$masked2;\n\n      return (_this$masked2 = this.masked).extractTail.apply(_this$masked2, arguments);\n    }\n  }, {\n    key: \"appendTail\",\n    value: function appendTail() {\n      var _this$masked3;\n\n      return (_this$masked3 = this.masked).appendTail.apply(_this$masked3, arguments);\n    }\n  }, {\n    key: \"extractInput\",\n    value: function extractInput() {\n      var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n      var flags = arguments.length > 2 ? arguments[2] : undefined;\n      return this.masked.extractInput(fromPos, toPos, flags);\n    }\n  }, {\n    key: \"nearestInputPos\",\n    value: function nearestInputPos(cursorPos) {\n      var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DIRECTION.NONE;\n      var minPos = 0;\n      var maxPos = this.value.length;\n      var boundPos = Math.min(Math.max(cursorPos, minPos), maxPos);\n\n      switch (direction) {\n        case DIRECTION.LEFT:\n        case DIRECTION.FORCE_LEFT:\n          return this.isComplete ? boundPos : minPos;\n\n        case DIRECTION.RIGHT:\n        case DIRECTION.FORCE_RIGHT:\n          return this.isComplete ? boundPos : maxPos;\n\n        case DIRECTION.NONE:\n        default:\n          return boundPos;\n      }\n    }\n  }, {\n    key: \"doValidate\",\n    value: function doValidate() {\n      var _this$masked4, _this$parent;\n\n      return (_this$masked4 = this.masked).doValidate.apply(_this$masked4, arguments) && (!this.parent || (_this$parent = this.parent).doValidate.apply(_this$parent, arguments));\n    }\n  }, {\n    key: \"doCommit\",\n    value: function doCommit() {\n      this.masked.doCommit();\n    }\n  }, {\n    key: \"state\",\n    get: function get() {\n      return {\n        masked: this.masked.state,\n        _isFilled: this._isFilled\n      };\n    },\n    set: function set(state) {\n      this.masked.state = state.masked;\n      this._isFilled = state._isFilled;\n    }\n  }]);\n\n  return PatternInputDefinition;\n}();\n\nexport { DEFAULT_INPUT_DEFINITIONS, PatternInputDefinition as default };\n","import createMask from './factory.js';\nimport IMask from '../core/holder.js';\nimport '../core/utils.js';\nimport '../_rollupPluginBabelHelpers-a0b34764.js';\n\n/** Mask pipe source and destination types */\n\nvar PIPE_TYPE = {\n  MASKED: 'value',\n  UNMASKED: 'unmaskedValue',\n  TYPED: 'typedValue'\n};\n/** Creates new pipe function depending on mask type, source and destination options */\n\nfunction createPipe(mask) {\n  var from = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : PIPE_TYPE.MASKED;\n  var to = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : PIPE_TYPE.MASKED;\n  var masked = createMask(mask);\n  return function (value) {\n    return masked.runIsolated(function (m) {\n      m[from] = value;\n      return m[to];\n    });\n  };\n}\n/** Pipes value through mask depending on mask type, source and destination options */\n\nfunction pipe(value) {\n  for (var _len = arguments.length, pipeArgs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    pipeArgs[_key - 1] = arguments[_key];\n  }\n\n  return createPipe.apply(void 0, pipeArgs)(value);\n}\nIMask.PIPE_TYPE = PIPE_TYPE;\nIMask.createPipe = createPipe;\nIMask.pipe = pipe;\n\nexport { PIPE_TYPE, createPipe, pipe };\n","import { d as _inherits, e as _createSuper, a as _classCallCheck, _ as _createClass, g as _get, h as _getPrototypeOf, f as _slicedToArray } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport MaskedPattern from './pattern.js';\nimport IMask from '../core/holder.js';\nimport '../core/utils.js';\nimport '../core/change-details.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './pattern/input-definition.js';\nimport './factory.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/chunk-tail-details.js';\nimport './regexp.js';\n\n/** Pattern which accepts ranges */\n\nvar MaskedRange = /*#__PURE__*/function (_MaskedPattern) {\n  _inherits(MaskedRange, _MaskedPattern);\n\n  var _super = _createSuper(MaskedRange);\n\n  function MaskedRange() {\n    _classCallCheck(this, MaskedRange);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(MaskedRange, [{\n    key: \"_matchFrom\",\n    get:\n    /**\n      Optionally sets max length of pattern.\n      Used when pattern length is longer then `to` param length. Pads zeros at start in this case.\n    */\n\n    /** Min bound */\n\n    /** Max bound */\n\n    /** */\n    function get() {\n      return this.maxLength - String(this.from).length;\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"_update\",\n    value: function _update(opts) {\n      // TODO type\n      opts = Object.assign({\n        to: this.to || 0,\n        from: this.from || 0\n      }, opts);\n      var maxLength = String(opts.to).length;\n      if (opts.maxLength != null) maxLength = Math.max(maxLength, opts.maxLength);\n      opts.maxLength = maxLength;\n      var fromStr = String(opts.from).padStart(maxLength, '0');\n      var toStr = String(opts.to).padStart(maxLength, '0');\n      var sameCharsCount = 0;\n\n      while (sameCharsCount < toStr.length && toStr[sameCharsCount] === fromStr[sameCharsCount]) {\n        ++sameCharsCount;\n      }\n\n      opts.mask = toStr.slice(0, sameCharsCount).replace(/0/g, '\\\\0') + '0'.repeat(maxLength - sameCharsCount);\n\n      _get(_getPrototypeOf(MaskedRange.prototype), \"_update\", this).call(this, opts);\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"isComplete\",\n    get: function get() {\n      return _get(_getPrototypeOf(MaskedRange.prototype), \"isComplete\", this) && Boolean(this.value);\n    }\n  }, {\n    key: \"boundaries\",\n    value: function boundaries(str) {\n      var minstr = '';\n      var maxstr = '';\n\n      var _ref = str.match(/^(\\D*)(\\d*)(\\D*)/) || [],\n          _ref2 = _slicedToArray(_ref, 3),\n          placeholder = _ref2[1],\n          num = _ref2[2];\n\n      if (num) {\n        minstr = '0'.repeat(placeholder.length) + num;\n        maxstr = '9'.repeat(placeholder.length) + num;\n      }\n\n      minstr = minstr.padEnd(this.maxLength, '0');\n      maxstr = maxstr.padEnd(this.maxLength, '9');\n      return [minstr, maxstr];\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"doPrepare\",\n    value: function doPrepare(str) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      str = _get(_getPrototypeOf(MaskedRange.prototype), \"doPrepare\", this).call(this, str, flags).replace(/\\D/g, '');\n      if (!this.autofix) return str;\n      var fromStr = String(this.from).padStart(this.maxLength, '0');\n      var toStr = String(this.to).padStart(this.maxLength, '0');\n      var val = this.value;\n      var prepStr = '';\n\n      for (var ci = 0; ci < str.length; ++ci) {\n        var nextVal = val + prepStr + str[ci];\n\n        var _this$boundaries = this.boundaries(nextVal),\n            _this$boundaries2 = _slicedToArray(_this$boundaries, 2),\n            minstr = _this$boundaries2[0],\n            maxstr = _this$boundaries2[1];\n\n        if (Number(maxstr) < this.from) prepStr += fromStr[nextVal.length - 1];else if (Number(minstr) > this.to) prepStr += toStr[nextVal.length - 1];else prepStr += str[ci];\n      }\n\n      return prepStr;\n    }\n    /**\n      @override\n    */\n\n  }, {\n    key: \"doValidate\",\n    value: function doValidate() {\n      var _get2;\n\n      var str = this.value;\n      var firstNonZero = str.search(/[^0]/);\n      if (firstNonZero === -1 && str.length <= this._matchFrom) return true;\n\n      var _this$boundaries3 = this.boundaries(str),\n          _this$boundaries4 = _slicedToArray(_this$boundaries3, 2),\n          minstr = _this$boundaries4[0],\n          maxstr = _this$boundaries4[1];\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.from <= Number(maxstr) && Number(minstr) <= this.to && (_get2 = _get(_getPrototypeOf(MaskedRange.prototype), \"doValidate\", this)).call.apply(_get2, [this].concat(args));\n    }\n  }]);\n\n  return MaskedRange;\n}(MaskedPattern);\nIMask.MaskedRange = MaskedRange;\n\nexport { MaskedRange as default };\n","import { d as _inherits, e as _createSuper, _ as _createClass, a as _classCallCheck, g as _get, h as _getPrototypeOf } from '../_rollupPluginBabelHelpers-a0b34764.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/continuous-tail-details.js';\nimport '../core/utils.js';\n\n/** Masking by RegExp */\n\nvar MaskedRegExp = /*#__PURE__*/function (_Masked) {\n  _inherits(MaskedRegExp, _Masked);\n\n  var _super = _createSuper(MaskedRegExp);\n\n  function MaskedRegExp() {\n    _classCallCheck(this, MaskedRegExp);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(MaskedRegExp, [{\n    key: \"_update\",\n    value:\n    /**\n      @override\n      @param {Object} opts\n    */\n    function _update(opts) {\n      if (opts.mask) opts.validate = function (value) {\n        return value.search(opts.mask) >= 0;\n      };\n\n      _get(_getPrototypeOf(MaskedRegExp.prototype), \"_update\", this).call(this, opts);\n    }\n  }]);\n\n  return MaskedRegExp;\n}(Masked);\nIMask.MaskedRegExp = MaskedRegExp;\n\nexport { MaskedRegExp as default };\n"]}